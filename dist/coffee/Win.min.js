/**
 * win - Libreria para web aplicaciones RIA
 * @version v0.0.1
 * @link    https://github.com/jhon3rick/Win.js#readme
 * @author  Jhon Marroquin (Twitter @jhon3rick || email jhon3rick@gmail.com)
 * @license (MIT)
 */
var Win;Win.Ajax=function(){return{request:function(e){var t,n,i,r,a;if(i="","undefined"==typeof e&&console.warn("Para hacer uso del ajax debe enviar el objeto con los paramteros Win.Ajax.request(obj) \nConsulte la documentacion del proyecto"),"undefined"!=typeof e.params)for(r in e.params)i+=""===i?r+"="+e.params[r]:"&"+r+"="+e.params[r];return a=new XMLHttpRequest,t=e.url+"?"+i,n=e.method||"POST",a.open(n,t,!0),a.onreadystatechange=function(){var t;return 4===a.readyState?(t=a.responseText,e.success(t,a)):e.failure(a)},a.send(null)},load:function(div,obj){var bodyXhr,eval_script,extract_script,method,parametros,tagScript,value,xhr;if(parametros="",tagScript="(?:<script.*?>)((\n|\r|.)*?)(?:</script>)","undefined"!=typeof obj.params)for(value in obj.params)parametros+=""===parametros?value+"="+obj.params[value]:"&"+value+"="+obj.params[value];return xhr=new XMLHttpRequest,bodyXhr=obj.url+"?"+parametros,method=obj.method||"POST",xhr.open(method,bodyXhr,!0),xhr.onreadystatechange=function(){var e,t;return 4===xhr.readyState?(t=xhr.responseText,e=extract_script(t),div.innerHTML=e,eval_script(t)):void 0},xhr.send(null),extract_script=function(e){var t;return t=new RegExp(tagScript,"img"),e.replace(t,"")},eval_script=function(string){var script,scripts;return scripts=string.match(new RegExp(tagScript,"img"))||[],script="",scripts.map(function(e){return script+=(e.match(new RegExp(tagScript,"im"))||["",""])[1]}),eval(script)}}}}(),Win=function(){return{Window:function(e){var t,n,i,r,a,o,d,u,l,c,p,s,v,m,y,g,h,f,b,w,x,T;return w=e.width||300,p=e.height||300,s=e.id||"",h=e.title||"",f=e.titleStyle||"",m=e.modal||"",i=e.autoScroll||"",l=e.closable||"",t=e.autoDestroy||"",n=e.autoLoad||"",c=e.drag||"",y=e.resize||"",g=e.theme||"",u=e.bodyStyle||"",d=e.bodyColor||"#FFF",o=document.querySelector("body"),T=document.createElement("div"),x=this,r=e.bgBody?"background-color:"+e.bgBody+";":"",a=e.bgTitle?"background-color:"+e.bgTitle+";":"",T.setAttribute("id","win_modal_"+s),T.setAttribute("class","win-modal"),v=o.offsetWidth<w?0:(o.offsetWidth-w)/2,b=o.offsetHeight<p?0:(o.offsetHeight-p)/2,T.innerHTML='<div style="width:'+w+"; height:"+p+"; top:"+b+"; left:"+v+"; "+r+" "+u+'" id="'+s+'" class="win-marco">\n	<div class="win-title" id="win_title_'+s+'" style="'+a+" "+f+'">\n		<div class="win-title-txt">'+h+'</div>\n		<div class="win-title-btn" id="btn_close_ventana_'+s+"\" onclick=\"document.querySelector('body').removeChild(document.querySelector('#win_modal_"+s+'\'));"></div>\n	</div>\n	<div class="win-div-resize" id="win_div_resize_'+s+'"></div>\n	<div class="win-tbar" id="win_tbar_'+s+'"></div>\n	<div class="win-window-body" id="win_window_'+s+'">Contenido</div>\n</div>\n<script onload>alert(1);</script>',o.appendChild(T),e.tbar.id=s,Win.tbar(e.tbar),Win.Ajax.load(document.querySelector("#win_window_"+s),e.autoLoad)},tbar:function(e){var t,n;return"object"==typeof e?(t="",n=document.getElementById("win_tbar_"+e.id),e.forEach(function(e,i,r){return"button"===e.xtype?Win.button({tbar:n,align:t,json:e}):"buttongroup"===e.xtype?(e.tbar=n,Win.buttongroup(e)):"tbtext"===e.xtype?Win.tbtext({tbar:n,align:t,json:e}):"-"===e?Win.separator({tbar:n,align:t}):"->"===e?t="right":void 0})):void 0},buttongroup:function(e){},button:function(e){var t,n,i,r,a;return a=e.json.text||"",r=e.json.id||"",n=e.json.cls||"",i="right"===e.align?"widge-right":"",t=document.createElement("div"),t.setAttribute("id",r),t.setAttribute("class","win-btn "+i),t.innerHTML='<button class="'+n+'">'+a+"</button>",t.onclick=e.json.handler,e.tbar.appendChild(t)},tbtext:function(e){var t,n;return n=document.createElement("div"),t="right"===e.align?"widge-right":"",n.setAttribute("id","win_tbtext_"+e.json.id),n.setAttribute("class","win-tbtext "+t),n.innerHTML="<div>"+e.json.text+"</div>",e.tbar.appendChild(n)},separator:function(e){var t,n;return n=document.createElement("div"),t="right"===e.align?"widge-right":"",n.setAttribute("class","win-separator "+t),n.innerHTML="<div>|</div>",e.tbar.appendChild(n)},getButton:function(e){return this.hiden=function(e){return document.getElementById("id").style.display="none"},this.show=function(e){return document.getElementById("id").style.display="block"},e},get:function(e){return{load:function(t){var n;return n=document.getElementById(e),Win.Ajax.load(n,t)},element:function(){return document.getElementById(e)}}}}}(),Win.form=function(){return{intField:function(e){return document.getElementById(e.applyTo).className+=" win-input-number",document.getElementById(e.applyTo).onkeypress=function(e){return Win.form.validateIntField({event:e,eventType:"keypress",input:this})},document.getElementById(e.applyTo).onchange=function(e){return Win.form.validateIntField({event:e,eventType:"change",input:this})}},doubleField:function(e){return document.getElementById(e.applyTo).className+=" win-input-number",document.getElementById(e.applyTo).onkeypress=function(e){return Win.form.validateDoubleField({event:e,eventType:"keypress",input:this})},document.getElementById(e.applyTo).onchange=function(e){return Win.form.validateDoubleField({event:e,eventType:"change",input:this})}},textField:function(e){return document.getElementById(e.applyTo).onkeyup=function(t){return Win.form.validateTextField({event:t,eventType:"keyup",input:this,type:e.type})},document.getElementById(e.applyTo).onchange=function(t){return Win.form.validateTextField({event:t,eventType:"change",input:this,type:e.type})}},emailField:function(e){return document.getElementById(e.applyTo).onchange=function(e){return Win.form.validateEmailField({event:e,input:this})}},globalField:function(e){},validateIntField:function(e){var t;return t=document.all?e.event.keyCode:e.event.which,8===t||9===t||0===t||13===t?!0:"keypress"===e.eventType?/\d/.test(String.fromCharCode(t)):"change"===e.eventType?e.input.value=e.input.value.replace(/[^\d.]/g,""):void 0},validateDoubleField:function(e){var t,n,i;return n=document.all?e.event.keyCode:e.event.which,8===n||9===n||0===n||13===n?!0:"keypress"===e.eventType?/[\d.]/.test(String.fromCharCode(n)):"change"!==e.eventType||(e.input.value=e.input.value.replace(/[^\d.]/g,""),console.log(!!e.input.value.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)),i=!!e.input.value.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/))?void 0:(t=e.input.value.split("."),e.input.value=t[0]+"."+t[1])},validateTextField:function(e){var t;if(t=document.all?e.event.keyCode:e.event.which,8===t||9===t||0===t||13===t)return!0;if("keyup"===e.eventType){if("uppercase"===e.type)return e.input.value=e.input.value.toUpperCase();if("lowercase"===e.type)return e.input.value=e.input.value.toLowerCase()}else if("change"===e.eventType)return e.input.value=e.input.value.replace(/[\#\-\"\']/g,"")},validateEmailField:function(e){var t;return t=!!e.input.value.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i),t?void 0:(e.input.value="",e.input.focus())}}}();