/**
 * win - Libreria para web aplicaciones RIA
 * @version v0.0.1
 * @link    https://github.com/jhon3rick/Win.js#readme
 * @author  Jhon Marroquin (Twitter @jhon3rick || email jhon3rick@gmail.com)
 * @license (MIT)
 */
(function(){"use strict";var Win,hasProp={}.hasOwnProperty;Win=function(){var e,t,n,i,a,r,o,l,d,u;return i=[],o=Object.prototype,r=/^\s*<(\w+|!)[^>]*>/,n=[1,9,11],t=/^\.([\w-]+)$/,a=/^#[\w\d-]+$/,l=/^[\w-]+$/,e=function(t,n){var i;return t?"function"===e.toType(t)?e(document).ready(t):(i=d(t,n),u(i,t)):u()},e.query=function(e,n){var i;return t.test(n)?i=e.getElementsByClassName(n.replace(".","")):l.test(n)?i=e.getElementsByTagName(n):a.test(n)&&e===document?(i=e.getElementById(n.replace("#","")),i||(i=[])):i=e.querySelectorAll(n),i.nodeType?[i]:Array.prototype.slice.call(i)},e.toType=function(e){var t;return t=o.toString.call(e).match(/\s([a-z|A-Z]+)/),t.length>1?t[1].toLowerCase():"object"},e.each=function(t,n){var i,a,r,o,l;if(a=void 0,o=void 0,"array"===e.toType(t))for(a=r=0,l=t.length;l>r;a=++r)i=t[a],n.call(i,a,i)===!1;else for(o in t)n.call(t[o],o,t[o])===!1;return t},u=function(e,t){return null==t&&(t=""),e=e||i,e.selector=t,e.__proto__=u.prototype,e},d=function(t,i){var a,o;return a=null,o=e.toType(t),"array"===o?a=_compact(t):"string"===o&&r.test(t)?(a=_fragment(t.trim(),RegExp.$1),t=null):"string"===o?(a=e.query(document,t),i&&(a=1===a.length?e.query(a[0],i):e.map(function(){return e.query(a,i)}))):(n.indexOf(t.nodeType)>=0||t===window)&&(a=[t],t=null),a},u.prototype=e.fn={},e.fn.each=function(e){return this.forEach(function(t,n){return e.call(t,n,t)}),this},e.fn.forEach=i.forEach,e.version="0.0.1",e}(),this.Win=this.$W=Win,"undefined"!=typeof module&&null!==module&&(module.exports=Win),function(e){return e.ini=function(t){var n,i,a,r,o,l;if(t.theme){for(o=e("head > link"),a=0,r=o.length;r>a;a++)if(i=o[a],/Win-theme/g.test(i.getAttribute("href")))return n=i.getAttribute("href").split("Win-theme",1),void i.setAttribute("href",n+t.theme);return l=document.createElement("link"),l.setAttribute("rel","stylesheet"),l.setAttribute("href",t.theme),e("head")[0].appendChild(l)}}}(Win),function(e){return e.fn.attr=function(t,n){return this.length>0&&"string"===e.toType(t)?null!=n?this.each(function(){return this.setAttribute(t,n)}):this[0].getAttribute(t):void 0},e.fn.removeAttr=function(t){return this.length>0&&"string"===e.toType(t)?this.each(function(){return this.removeAttribute(t)}):void 0},e.fn.data=function(e,t){return this.attr("data-"+e,t)},e.fn.removeData=function(e){return this.removeAttr("data-"+e)},e.fn.val=function(e){return null!=e?this.each(function(){return this.value=e.toString()}):this.length>0?this[0].value:null},e.fn.show=function(){return this.style("display","block")},e.fn.hide=function(){return this.style("display","none")},e.fn.focus=function(){return this[0].focus()},e.fn.blur=function(){return this[0].blur()},e.fn.offset=function(){var e,t;return this.length>0&&(e=this[0].getBoundingClientRect(),t={left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}),t}}(Win),function(e){var t,n,i;return t=["-webkit-","-moz-","-ms-","-o-",""],e.fn.addClass=function(e){return this.each(function(){var t,i,a,r,o;for(a=n(e),r=[],t=0,i=a.length;i>t;t++)o=a[t],r.push(this.classList.add(o));return r})},e.fn.removeClass=function(e){return this.each(function(){var t,i,a,r,o;for(a=n(e),r=[],t=0,i=a.length;i>t;t++)o=a[t],r.push(this.classList.remove(o));return r})},e.fn.toggleClass=function(e){return this.each(function(){var t,i,a,r,o;for(a=n(e),r=[],t=0,i=a.length;i>t;t++)o=a[t],r.push(this.classList.toggle(o));return r})},e.fn.hasClass=function(e){return this.length>0&&this[0].classList.contains(e)},e.fn.listClass=function(){return this.length>0?this[0].classList:void 0},e.fn.style=e.fn.css=function(e,t){var n;return null!=t?this.each(function(){return this.style[e]=t}):(n=this[0],n.style[e]||i(n,e))},e.fn.vendor=function(e,n){var i,a,r,o;for(o=[],i=0,a=t.length;a>i;i++)r=t[i],o.push(this.style(""+r+e,n));return o},i=function(e,t){return document.defaultView.getComputedStyle(e,"")[t]},n=function(e){return Array.isArray(e)||(e=[e]),e}}(Win),function(e){var t,n,i,a,r,o,l,d,u,s,c,f,p;return t=1,a={},i={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},n={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touch:"click",orientationchange:"resize"},r=/complete|loaded|interactive/,e.fn.on=function(t,n,i){return null==n||"function"===e.toType(n)?this.bind(t,n):this.delegate(n,t,i)},e.fn.off=function(t,n,i){return null==n||"function"===e.toType(n)?this.unbind(t,n):this.undelegate(n,t,i)},e.fn.ready=function(t){return r.test(document.readyState)?t.call(this,e):e.fn.addEvent(document,"DOMContentLoaded",function(){return t.call(this,e)})},e.fn.bind=function(e,t){return this.forEach(function(n){return f(n,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){return p(this,e,t)})},e.fn.delegate=function(t,n,i){return this.each(function(a,r){return f(r,n,i,t,function(n){return function(i){var a,l;return l=e(i.target).closest(t,r).get(0),l?(a=e.extend(o(i),{currentTarget:l,liveFired:r}),n.apply(l,[a].concat([].slice.call(arguments,1)))):void 0}})})},e.fn.undelegate=function(e,t,n){return this.each(function(){return p(this,t,n,e)})},e.fn.trigger=function(t,n,i){return"string"===e.toType(t)&&(t=u(t,n)),null!=i&&(t.originalEvent=i),this.each(function(){return this.dispatchEvent(t)})},e.fn.addEvent=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},e.fn.removeEvent=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},u=function(e,t){var n;return n=document.createEvent("Events"),n.initEvent(e,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null),t&&(n.touch=t),n},f=function(t,n,i,r,o){var u,s,f,p;return n=d(n),f=c(t),s=a[f]||(a[f]=[]),u=o&&o(i,n),p={event:n,callback:i,selector:r,proxy:l(u,i,t),delegate:u,index:s.length},s.push(p),e.fn.addEvent(t,p.event,p.proxy)},p=function(t,n,i,r){var o;return n=d(n),o=c(t),s(o,n,i,r).forEach(function(n){return delete a[o][n.index],e.fn.removeEvent(t,n.event,n.proxy)})},c=function(e){return e._id||(e._id=t++)},d=function(t){var i;return i=("function"==typeof e.isMobile?e.isMobile():void 0)?t:n[t],i||t},l=function(e,t,n){var i;return t=e||t,i=function(e){var i;return i=t.apply(n,[e].concat(e.data)),i===!1&&e.preventDefault(),i}},s=function(e,t,n,i){return(a[e]||[]).filter(function(e){return e&&(!t||e.event===t)&&(!n||e.callback===n)&&(!i||e.selector===i)})},o=function(t){var n;return n=e.extend({originalEvent:t},t),e.each(i,function(e,i){return n[e]=function(){return this[i]=function(){return!0},t[e].apply(t,arguments)},n[i]=function(){return!1}}),n}}(Win),function(e){var t,n,i,a;return t="parentNode",e.fn.find=function(t){var n;return n=1===this.length?Quo.query(this[0],t):this.map(function(){return Quo.query(this,t)}),e(n)},e.fn.parent=function(e){var a;return a=e?i(this):this.instance(t),n(a,e)},e.fn.children=function(e){var t;return t=this.map(function(){return Array.prototype.slice.call(this.children)}),n(t,e)},e.fn.siblings=function(e){var t;return t=this.map(function(e,t){return Array.prototype.slice.call(t.parentNode.children).filter(function(e){return e!==t})}),n(t,e)},e.fn.get=function(e){return this[e]||null},e.fn.first=function(){return e(this[0])},e.fn.last=function(){return e(this[this.length-1])},e.fn.closest=function(t,n){var i,a;for(a=this[0],i=e(t),i.length||(a=null);a&&i.indexOf(a)<0;)a=a!==n&&a!==document&&a.parentNode;return e(a)},e.fn.next=function(){return a.call(this,"nextSibling")},e.fn.prev=function(){return a.call(this,"previousSibling")},e.fn.instance=function(e){return this.map(function(){return this[e]})},e.fn.map=function(t){return e.map(this,function(e,n){return t.call(e,n,e)})},i=function(t){var n;for(n=[];t.length>0;)t=e.map(t,function(e){return e=e.parentNode,e!==document&&n.indexOf(e)<0?(n.push(e),e):void 0});return n},n=function(t,n){return null!=n?e(t).filter(n):e(t)},a=function(t){var n;for(n=this[0][t];n&&1!==n.nodeType;)n=n[t];return e(n)}}(Win),function(e){return e.fn.text=function(e){return null!=e?this.each(function(){return this.textContent=e}):this.length>0?this[0].textContent:""},e.fn.html=function(t){var n;return null!=t?(n=e.toType(t),this.each(function(){return"string"===n?this.innerHTML=t:"array"===n?t.forEach(function(t){return function(n){return e(t).html(n)}}(this)):this.innerHTML+=e(t).html()})):this.length>0?this[0].innerHTML:""},e.fn.remove=function(){return this.each(function(){return null!=this.parentNode?this.parentNode.removeChild(this):void 0})},e.fn.empty=function(){return this.each(function(){return this.innerHTML=null})},e.fn.append=function(t){var n;return n=e.toType(t),this.each(function(){return"string"===n?this.insertAdjacentHTML("beforeend",t):"array"===n?t.forEach(function(t){return function(n){return e(t).append(n)}}(this)):this.appendChild(t)})},e.fn.prepend=function(t){var n;return n=e.toType(t),this.each(function(){return"string"===n?this.insertAdjacentHTML("afterbegin",t):"array"===n?t.each(function(e){return function(t,n){return e.insertBefore(n,e.firstChild)}}(this)):this.insertBefore(t,this.firstChild)})},e.fn.replaceWith=function(t){var n;return n=e.toType(t),this.each(function(){return this.parentNode?"string"===n?this.insertAdjacentHTML("beforeBegin",t):"array"===n?t.each(function(e){return function(t,n){return e.parentNode.insertBefore(n,e)}}(this)):this.parentNode.insertBefore(t,this):void 0}),this.remove()}}(Win),function($W){return $W.Script={},$W.Script.strReplace=function(e,t,n){for(;-1!==e.toString().indexOf(t);)e=e.toString().replace(t,n);return e},$W.Script.numberTechnical=function(e,t){var n,i,a,r,o,l,d,u;if(n="",49===e&&!isNaN(t)){for(l=0,d=0,u=t.length,o=[16],o[1]=3,o[2]=7,o[3]=13,o[4]=17,o[5]=19,o[6]=23,o[7]=29,o[8]=37,o[9]=41,o[10]=43,o[11]=47,o[12]=53,o[13]=59,o[14]=67,o[15]=71,a=0,r=u.length;r>a;a++)i=u[a],d=t.substr(i,1),l+=d*o[u-i];d=l%11,n=d>1?11-d:d}return n},$W.Script.dateNow=function(){var e,t,n,i;return t=0,n=0,e=new Date,i=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,t=e.getDate()<10?"0"+e.getDate():e.getDate(),i+"-"+n+"-"+t},$W.Script.timeMeridian=function(e){var t,n,i,a,r;return null===e&&(e="AM/PM"),r=new Date,n=r.getHours(),a=r.getMinutes(),t=12>n?"AM":"PM",10>a&&(a="0"+a),"AM/PM"===e&&(n>12&&(n-=12),10>n&&(n="0"+n),i=n+":"+a+" "+t),"24Hrs"===e&&(10>n&&(n="0"+n),i=n+":"+a),i},$W.Script.timeMysql=function(hora){var A,B,H;return A=hora.split(" "),1===A.length?H=A[0]+":00":2===A.length&&(B=A[0].split(":"),"PM"===A[1]&&(B[0]=eval(B[0])+eval(12)),H=B[0]+":"+B[1]+":00"),H},$W.Script.dateLong=function(e){var t,n,i;return n=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],i=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],t=e.split("-"),t[2]+" "+i[t[1]-1]+" de "+t[0]},$W.Script.numberFormat=function(e,t,n,i){var a,r,o,l,d,u,s;return d=e,a=isNaN(t=Math.abs(t))?2:t,r=void 0===n?",":n,s=void 0===i?".":i,u=0>d?"-":"",o=parseInt(d=Math.abs(+d||0).toFixed(a))+"",l=(l=o.length)>3?l%3:0,u+(l?o.substr(0,l)+s:"")+o.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?r+Math.abs(d-o).toFixed(a).slice(2):"")}}(Win),function(e){var t,n,i,a,r,o,l,d,u,s,c,f,p,v,h,m;return e.Form={},e.Form.ini=function(n,i){var a,r,o,l,u,s,c,f,p,v,h,m;if(null!==n&&(f=n.indexClass||"",p=n.name||"",m=n.url||"",h=n.size||{},u=n.field||{},v=n.opcionClass||"",c="parent_form_"+p,l=n.fTbar||!1,r=n.fPermisoInsert||!1,o=n.fPermisoUpdate||!1,a=n.fPermisoDelete||!1,i=i||{},"vInsert"!==v||r===!0||"true"===r))return s=d(v,p,u,h),document.getElementById(c).innerHTML+='<div id="form_tbar_'+p+'"></div> <form name="form_'+p+'" id="form_'+p+'" onsubmit="return false;" data-role="win-body" style="float:left; width:100%; height:100%; overflow:auto;"> <div style="float:left; padding:10px; width:'+h.fBodyAncho+'px;">'+s+"<div> </form>",l===!0&&t(p,v,m,f,r,o,a,i),"vUpdate"===v&&o!==!0&&"true"!==o&&e("#form_"+p+" input, #form_"+p+" select, #form_"+p+" textarea").attr("disabled","true"),e.Form.validate(c)},t=function(t,n,i,a,r,o,l,d){var u;return u=[],"vInsert"===n&&r!==!1&&"false"!==r?u.push({xtype:"button",id:"fInsert_"+t,cls:"grilla_save_24",text:"Guardar",handler:function(){return e.Form.fSave(t,i,a,d)}}):"vUpdate"===n&&o!==!1&&"false"!==o&&u.push({xtype:"button",id:"fUpdate_"+t,cls:"grilla_save_24",text:"Actualizar",handler:function(){return e.Form.fSave(t,i,a,d)}}),"vUpdate"===n&&l!==!1&&"false"!==l&&u.push({xtype:"button",id:"fDelete_"+t,cls:"grilla_delete_24",text:"Eliminar",handler:function(){return e.Form.fDelete(t,i,a,d)}}),e.Tbar({idApply:"form_tbar_"+t,items:u})},d=function(e,t,i,l){var d,u,s;u="";for(d in i)if(hasProp.call(i,d))switch(s=i[d],s.type){case"TextField":u+=o(t,d,s,l);break;case"ComboBox":u+=n(t,d,s,l);break;case"TextArea":u+=r(t,d,s,l);break;case"Separador":u+=a(s)}return u},o=function(e,t,n,i){var a,r,o,l;return o="text",a="block",l=n.validate||"",""!==l&&(l='data-validate="'+l+'"'),(n.hidden===!0||"true"===n.hidden||"hidden"===n.hidden)&&(o="hidden",a="none"),r=n.required===!0&&""===n.value?"empy":"none",'<div id="form_content_field_'+e+"_"+t+'" class="form_content_field" style="width:'+i.fDivAncho+"px; min-height:"+i.fDivAlto+"px; position:relative; display:"+a+'"> <div id="form_label_'+e+"_"+t+'" class="form_label" style="width:'+i.fLabelAncho+'px; position:relative;">'+n.label+'</div> <div id="form_field_'+e+"_"+t+'" class="form_field" style="'+i.fFieldAncho+'px; position:relative;"> <input type="'+o+'" id="form_'+e+"_"+t+'" value="'+n.value+'" style="width:'+n.width+'px;" data-value="'+n.value+'" data-required="'+n.required+'" data-style="'+r+'" data-label="'+n.label+'" '+l+"/> </div> </div>"},n=function(e,t,n,a){var r,o,l;return l=n.required===!0&&""===n.value?"empy":"none",o=n.option||{},r=i(n.value,o),'<div id="form_content_field_'+e+"_"+t+'" class="form_content_field" style="width:'+a.fDivAncho+"px; min-height:"+a.fDivAlto+'px;"> <div id="form_label_'+e+"_"+t+'" class="form_label" style="width:'+a.fLabelAncho+'px;">'+n.label+'</div> <div id="form_field_'+e+"_"+t+'" class="form_field" style="'+a.fFieldAncho+'"> <select id="form_'+e+"_"+t+'" style="width:'+n.width+'px;" data-value="'+n.value+'" data-textdb="'+n.textdb+'" data-required="'+n.required+'" data-style="'+l+'" data-label="'+n.label+'">'+r+"</select> </div> </div>"},i=function(e,t){var n,i,a,r;n='<option value="">Seleccione...</option>';for(i in t)hasProp.call(t,i)&&(a=t[i],r=a.index===e?"selected":"",n+='<option value="'+a.index+'" '+r+">"+a.value+"</option>");return n},r=function(e,t,n,i){var a;return a=n.required===!0&&""===n.value?"empy":"none",'<div id="form_content_field_'+e+"_"+t+'" class="form_content_field" style="width:'+i.fDivAncho+"px; min-height:"+i.fDivAlto+'px;"> <div id="form_label_'+e+"_"+t+'" class="form_label" style="width:'+i.fLabelAncho+'px;">'+n.label+'</div> <div id="form_field_'+e+"_"+t+'" class="form_field" style="'+i.fFieldAncho+'"> <textarea id="form_'+e+"_"+t+'" style="width:'+n.width+"px; height:"+n.height+'px;" data-required="'+n.required+'" data-style="'+a+'" data-label="'+n.label+'">'+n.value+"</textarea> </div> </div>"},a=function(e){return'<div class="form_separador"> <div style="width:80%; float:left">'+e.text+"</div> </div>"},e.Form.field=function(t){switch(t.type){case"integer":return e("#"+t.idApply).addClass+=" win-input-number",e("#"+t.idApply)[0].onkeypress=function(e){return f({event:e,eventType:"keypress",input:this})},e("#"+t.idApply)[0].onchange=function(e){return f({event:e,eventType:"change",input:this})};case"double":return e("#"+t.idApply).addClass+=" win-input-number",e("#"+t.idApply)[0].onkeypress=function(e){return s({event:e,eventType:"keypress",input:this})},e("#"+t.idApply)[0].onchange=function(e){return s({event:e,eventType:"change",input:this})};case"text":return e("#"+t.idApply)[0].onkeyup=function(e){return h({event:e,eventType:"keyup",input:this,option:t.option})},e("#"+t.idApply)[0].onchange=function(e){return h({event:e,eventType:"change",input:this,option:t.option})};case"email":return e("#"+t.idApply)[0].onchange=function(e){return c({event:e,input:this})};case"date":return u(t);case"percent":return e("#"+t.idApply)[0].onkeydown=function(e){return 13===e.keyCode?v({event:e,eventType:"keypress",input:this}):void 0},e("#"+t.idApply)[0].onchange=function(e){return v({event:e,input:this})}}},e.Form.validate=function(e){var t;return t=document.getElementById(e).querySelectorAll("input, textarea, select"),[].forEach.call(t,function(e){var t;switch(t=e.getAttribute("data-validate")){case"integer":return e.className+=" win-input-number",e.onkeypress=function(e){return f({event:e,eventType:"keypress",input:this})},e.onchange=function(e){return f({event:e,eventType:"change",input:this})};case"double":return e.className+=" win-input-number",e.onkeypress=function(e){return s({event:e,eventType:"keypress",input:this})},e.onchange=function(e){return s({event:e,eventType:"change",input:this})};case"upercase":return e.onkeyup=function(e){return m({event:e,eventType:"keyup",input:this})},e.onchange=function(e){return m({event:e,eventType:"change",input:this})};case"lowercase":return e.onkeyup=function(e){return p({event:e,eventType:"keyup",input:this})},e.onchange=function(e){return p({event:e,eventType:"change",input:this})};case"email":return e.onchange=function(e){return c({event:e,input:this})};case"percent":return e.onchange=function(e){return v({event:e,input:this})};case"date":return u(e);default:return e.onkeyup=function(e){return h({event:e,eventType:"keyup",input:this})},e.onchange=function(e){return h({event:e,eventType:"change",input:this})}}})},f=function(e){var t;return t=document.all?e.event.keyCode:e.event.which,l(t)?!0:"keypress"===e.eventType?/\d/.test(String.fromCharCode(t)):"change"===e.eventType?e.input.value=e.input.value.replace(/[^\d.]/g,""):void 0},s=function(e){var t,n,i;return n=document.all?e.event.keyCode:e.event.which,l(n)?!0:"keypress"===e.eventType?/[\d.]/.test(String.fromCharCode(n)):"change"!==e.eventType||(e.input.value=e.input.value.replace(/[^\d.]/g,""),i=!!e.input.value.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/))?void 0:(t=e.input.value.split("."),e.input.value=t[0]+"."+t[1])},h=function(e){var t;return t=document.all?e.event.keyCode:e.event.which,l(t)?!0:"change"===e.eventType?e.input.value=e.input.value.replace(/[\#\-\"\']/g,""):void 0},m=function(e){var t;return t=document.all?e.event.keyCode:e.event.which,l(t)?!0:"keyup"===e.eventType?(e.input.value=e.input.value.toUpperCase(),e.input.value=e.input.value.replace(/[\#\-\"\']/g,"")):"change"===e.eventType?e.input.value=e.input.value.replace(/[\#\-\"\']/g,""):void 0},p=function(e){var t;if(t=document.all?e.event.keyCode:e.event.which,l(t))return!0;if("keyup"===e.eventType){if("uppercase"===e.option)return e.input.value=e.input.value.toLowerCase()}else if("change"===e.eventType)return e.input.value=e.input.value.replace(/[\#\-\"\']/g,"")},c=function(e){var t;return t=!!e.input.value.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i),t?void 0:(e.input.value="",e.input.focus())},v=function(e){var t,n,i;return t=1*e.input.getAttribute("data-max"),n=1*e.input.getAttribute("data-min"),i=1*e.input.value,t>=i?i>=n?console.log("valor aceptado"):(alert("no se aceptan  menores a "+n),e.input.value="",e.input.focus()):(alert("no se aceptan muneros mayores a"+t),e.input.value="",e.input.focus()),!0},l=function(e){return 8===e||9===e||0===e||13===e||37===e||38===e||39===e||40===e?!0:!1},u=function(t){var n,i,a,r,o,l,d,u,s,c,f,p,v,h,m,g,y,_,b,w,A,x,T,E,L,I;if(null!==t)return E="-",y=t.idApply||t.id,m=t.format||"y-m-d",w=t.selected||"",b=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],h=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],I=["D","L","M","M","J","V","S"],_=""!==y?document.getElementById(y)||t:void 0,_.dataset.icon="date","undefined"!=typeof t.value&&(_.value=t.value),v=[],E=m.replace(/[a-zA-Z\d\s]/g,"")[0],g=m.replace(/[^a-zA-Z\d\s]/g,""),L=_.value.replace(/[^\d]/g,""),""===_.value?(T=(new Date).getFullYear(),x=(new Date).getMonth(),A=(new Date).getDate()):(v[g[0]]=L[0],v[g[1]]=L[1],v[g[2]]=L[2],T=new Date(v.y).getFullYear(),x=new Date(v.m).getMonth(),A=new Date(v.d).getDate()),_.readOnly=!0,_.onclick=function(){return e("#date_"+y)[0]?void c(e("#date_"+y)[0]):(a(this),p(this))},a=function(t){var n,r,o,l,c,v,h,m,g,b,w,A,E,L,C,B,W,M;for(v='<table id="win-calendar-year-'+y+'" cellpadding="0" cellspacing="0" class="win-calendar-year" style="display:block;"></table> <table id="win-calendar-'+y+'" cellpadding="0" cellspacing="0" class="win-calendar"> <tr> <td id="prev-month-'+y+'" class="calendar-change"> < </td> <td id="title-date-'+y+'" colspan="5" class="calendar-header">'+s(x)+" "+T+('</td> <td id="next-month-'+y+'" class="calendar-change"> > </td> </tr> <tr class="weekDaysTitleRow">'),h=0,g=I.length;g>h;h++)n=I[h],v+="<td>"+n+"</td>";for(r=d(T,x),C=u(T,x),A=0,E=1,7!==C?(A=Math.ceil((C+1+r)/7),w=C+1):w=0,M=(new Date).getDate(),B=(new Date).getMonth(),W=(new Date).getFullYear(),l=m=0,L=A;L>=0?L>m:m>L;l=L>=0?++m:--m){for(v+='<tr class="weekDaysRow">',c=b=0;7>b;c=++b)v+=E===M&&T===W&&x===B&&0===w?'<td id="today" class="weekDaysCell">':'<td class="weekDaysCell">',0===w&&(r>=E&&(v+="<a>"+E+"</a>"),E++),v+="</td>",w>0&&w--;v+="</tr>"}return v+="</table>",e("#date_"+y).length>0?e("#date_"+y).html(v):(o=document.createElement("div"),o.innerHTML=v,o.setAttribute("id","date_"+y),o.setAttribute("class","win-calendar-parent"),e("#"+y)[0].parentNode.insertBefore(o,e("#"+y)[0].nextSibling),f(_,o)),e("#title-date-"+y)[0].onclick=function(){var e;return e=1*this.innerHTML.split(" ")[1],i(e-5)},e("#prev-month-"+y)[0].onclick=function(){return x--,0>x&&(x=11,T--),a(t),p(t)},e("#next-month-"+y)[0].onclick=function(){return x++,x>11&&(x=0,T++),a(t),p(t)}},i=function(t){var a,r,o,l,d,u,s,c;for(s=t,c=t+6,u="",r=l=0;6>l;r=++l)o=r+6,u+='<div> <div class="date-change-month">'+b[r].substr(0,3)+'</div> <div class="date-change-month">'+b[o].substr(0,3)+"</div> </div>";for(a='<tr> <td colspan="2" rowspan="7" class="content-month">'+u+'</td> <td colspan="2" class="content-year"> <div id="change-year-down-'+y+'" class="calendar-change" style="float:left;"> < </div> <div id="change-year-top-'+y+'" class="calendar-change" style="float:right;"> > </div> </td> </tr>',r=d=0;6>d;r=++d)a+="<tr> <td>"+s++ +"</td> <td>"+c++ +"</td> </tr>";return a+='<tr style="border-top:1px solid #fff;"> <td colspan=2 style="padding:0px; border-right:1px solid #fff;"> <input type="button" style="width:100%; padding:3px;" value="Aceptar"> </td> <td colspan=2 style="padding:0px;"> <input type="button" style="width:100%; padding:3px;" value="Volver" id="boton-back-calendar-'+y+'"> </td> </tr>',e("#win-calendar-"+y).hide(),e("#win-calendar-year-"+y).show().html(a),e("#change-year-top-"+y)[0].onclick=function(){return i(c)},e("#change-year-down-"+y)[0].onclick=function(){return i(t-12)},e("#boton-back-calendar-"+y)[0].onclick=function(){return n()}},n=function(){return e("#win-calendar-year-"+y).hide().html(""),e("#win-calendar-"+y).show()},c=function(e){return e.parentNode.removeChild(e)},p=function(t){var n,i,a,r,l,d;for(d=e("#win-calendar-"+y)[0],l=d.getElementsByTagName("a"),r=[],i=0,a=l.length;a>i;i++)n=l[i],r.push(n.onclick=function(){return A=this.innerHTML,t.value=o(A,x,T),c(e("#date_"+y)[0])});return r},o=function(e,t,n){var i,a;return t++,10>t&&(t="0"+t),10>e&&(e="0"+e),i=[],i.y=n,i.m=t,i.d=e,a=i[g[0]]+E+i[g[1]]+E+i[g[2]]},s=function(e){return b[e]},l=function(e){return h[e]},d=function(e,t){return 32-new Date(e,t,32).getDate()},u=function(e,t){var n;return n=new Date(e,t,0).getDay()},f=function(e,t){var n;return n=r(e),t.getAttribute("style","position:absolute; z-index:8000;")},r=function(e){var t,n;if(t=n=0,e.offsetParent)for(t=e.offsetLeft,n=e.offsetTop;e=e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop;return[t,n]}}}(Win),function(e){var t,n,i,a,r,o,l,d,u,s,c,f,p,v,h,m,g,y,_,b,w,A;return t=0,i={},n=!1,e.Window=function(n){var i,r,o,l,d,u,s,c,f,p,h,g,y,_,b,w,x,T,E,L,I,C,B,W;return C=n.width||300,h=n.height||300,_=n.id||"",E=n.title||"",L=n.titleStyle||"",w=n.modal||"",i=n.autoDestroy||"",r=n.autoLoad||"",y=n.html||"",p=n.drag||"",T=n.theme||"",s=n.bodyStyle||"",u=n.bodyColor||"#FFF",d=e("body")[0],x=this,c="undefined"!=typeof n.type&&""!==n.type?"alert":"",W=document.createElement("div"),o=n.bgBody?"background-color:"+n.bgBody+";":"",l=n.bgTitle?"background-color:"+n.bgTitle+";":"",f=n.closable!==!1?'<div class="win-title-btn" id="btn_close_ventana_'+_+'" onclick="'+_+'.close()"></div>':"",isNaN(C)?"auto"===C&&(C="calc(100% - 20px)"):C+="px",isNaN(h)?"auto"===h&&(h="calc(100% - 20px)"):h+="px",""===_&&t++,W.innerHTML+='<div id="win-modal-'+_+'" class="win-modal"> <div id="'+_+'" style="width:'+C+"; height:"+h+"; "+o+" "+s+'" class="win-marco"> <div class="win-file-resize" data-resize="top" id="win-resize-top-'+_+'"></div> <div class="win-file-resize" data-resize="bottom" id="win-resize-bottom-'+_+'"></div> <div class="win-file-resize" data-resize="left" id="win-resize-left-'+_+'"></div> <div class="win-file-resize" data-resize="right" id="win-resize-right-'+_+'"></div> <div class="win-modal-parent" id="win-modal-window_'+_+'"> <div class="win-modal-content"> <div class="win-loader-default" id="win-loader-'+_+'"></div> <div class="win-modal-label" id="label-load-'+_+'"></div> </div> </div> <header id="win-header-'+_+'"> <div class="win-title" id="win-title-'+_+'" style="'+l+" "+L+'"> <div class="win-title-txt">'+E+"</div> "+f+' </div> </header> <section id="win-section-'+_+'" style="height:calc(100% - 27px);" data-role="win-section"></section> </div> </div>',d.appendChild(W),B=document.getElementById(_).offsetWidth,g=document.getElementById(_).offsetHeight,b=d.offsetWidth<B/2?0:(d.offsetWidth-B)/2,I=d.offsetHeight<g/2?0:(d.offsetHeight-g)/2,e("#"+_).css("left",b+"px").css("top",I+"px"),n.resize&&(v(e("#win-resize-top-"+_)[0]),v(e("#win-resize-bottom-"+_)[0]),v(e("#win-resize-left-"+_)[0]),v(e("#win-resize-right-"+_)[0])),n.tbar&&console.log(n.tbar),n.tbar&&A({items:n.tbar},"win-section-"+_),n.items&&m(n.items,"win-section-"+_),n.autoLoad&&a(n,"win-section-"+_),{close:function(){return e("#win-modal-"+_)[0].parentNode.removeChild(e("#win-modal-"+_)[0])}}},e.TabPanel=function(e){var n,i;return e.id?i=e.id:(t++,i="win-tab-"+t),n="",e.items.forEach(json,index,element)(function(){return n+='<div id="'+i+'">'+json.title+"</div>"}),'<div id="'+e.id+'">'+n+"</div>"},e.Add=function(e){var t,n,i;return i=document.getElementById(e.idApply).getAttribute("data-role"),"win-tbar"===i&&(t=document.getElementById(e.idApply).lastChild,null!==t&&(n=t.getAttribute("data-role"),"div-empty"===n&&t.parentNode.removeChild(t))),e.items&&m(e.items,e.idApply),e.autoLoad?a(e,e.idApply):void 0},e.Tbar=function(e){var t;return t=document.getElementById(""+e.idApply),t.className="win-tbar",t.setAttribute("data-role","win-tbar"),m(e.items,e.idApply)},e.Element=function(t){return this.hidden=function(){return e("#"+t).style("display","none"),c(t),i[t].hidden=!0},this.show=function(){return e("#"+t).style("display","block"),c(t),i[t].hidden=!1},this.enable=function(){return document.getElementById(t).setAttribute("data-state","enable"),i[t].state="enable"},this.disable=function(){return document.getElementById(t).setAttribute("data-state","disable"),i[t].state="disable"},this},e.BlockBtn=function(t){return"disable"!==i[t].state?(e.Element(t).disable(),setTimeout(function(){return document.getElementById(t)?e.Element(t).enable():void 0},1500)):void 0},e.loading=function(t){var n,i,a,r,o,l,d,u,s;return"undefined"==typeof t.id_ventana||"undefined"==typeof t.estado?void console.warn("Funcion: Loading (Mostrar ventana modal)\nFaltan parametros en el objeto\nParametro Obligatorios: id_ventana ,estado"):e("#win-body-"+t.id_ventana)[0]?(d=e("#win-modal-window_"+t.id_ventana)[0],u=t.text||"Load...",l=t.loader||"default","on"===t.estado?(e("#win-modal-window_"+t.id_ventana)[0].innerHTML='<div class="win-modal-content"> <div class="win-loader-default" id="win-loader-'+t.id_ventana+'"></div> <div class="win-modal-label" id="label-load-'+t.id_ventana+'"></div> </div>',d.style.visibility="visible",e("#win-loader-"+t.id_ventana)[0].setAttribute("class","win-loader-"+l),e("#label-load-"+t.id_ventana)[0].innerHTML=u):"off"===t.estado?(o={sucess:"",fail:"",warm:""},t?(r=o[t.icono]||o.sucess,a=t.evento_icono||"",s=t.texto||"Informacion Almacenada",n=t.duracion||"2000",i=t.estilo_texto||"padding-top: 10px;font-size: 12px;color:#FFF;"):(r=o.sucess,a="",s="Informacion Almacenada",n="2000",i="padding-top:10px; font-size:12px; color:#FFF;"),"infinito"===n?e("#win-modal-window_"+t.id_ventana)[0].innerHTML='<div class="win-modal-content"><div class="win-modal-img-finish"> <img src="'+r+'" onclick="'+a+'"><br> <div class="win-modal-label label-finish">'+s+"</div> </div>":(e("#win-modal-window_"+t.id_ventana)[0].innerHTML='<div class="win-modal-content"><div class="win-modal-img-finish"> <img src="'+r+'" onclick="'+a+'"><br> <div class="win-modal-label label-finish">'+s+"</div> </div>",setTimeout(function(){return d.style.visibility="hidden"},n))):void 0):void console.warn("Funcion: Loading (Mostrar ventana modal)\nEl id de la ventana es incorrecto no se encuentra la ventana "+id_ventana)},e.Alert=function(t){var n,i,a,r;return r=250,n=120,a=t.title||"Alert",i=t.text||"",i+='<div class="content-btn"> <input type="button" value="Aceptar" onclick="$W(\'#Win_ventana_alert\')[0].parentNode.parentNode.removeChild($W(\'#Win_ventana_alert\')[0].parentNode)"> </div>',new e.Window({width:r,height:n,id:"Win_ventana_alert",title:a,html:i,type:"alert",modal:!0,autoScroll:!0,closable:!1,autoDestroy:!0,drag:!1,resize:!1})},e.Confirm=function(t){var n,i,a,r;return r=250,n=120,a=t.title||"Confirm",i=t.text||"",i+='<div class="content-btn"> <input type="button" value="Aceptar" onclick="$W(\'#Win_ventana_confirm\')[0].parentNode.parentNode.removeChild($W(\'#Win_ventana_confirm\')[0].parentNode); '+t.functionOK+';"> <input type="button" value="Cancelar" onclick="$W(\'#Win_ventana_confirm\')[0].parentNode.parentNode.removeChild($W(\'#Win_ventana_confirm\')[0].parentNode); return false;"> </div>',new e.Window({width:r,height:n,id:"Win_ventana_confirm",title:a,html:i,type:"alert",modal:!0,autoScroll:!0,closable:!1,autoDestroy:!0,drag:!1,resize:!1})},e.CtxMenu=function(t){return document.getElementById(t.idApply).oncontextmenu=function(n){return t.objApply=n.srcElement,t.clientX=event.clientX,t.clientY=event.clientY,e.Menu(t),!1}},e.Menu=function(e){var t,i,a,r,o;if(a="",l(),n=!0,e.items){o=e.items;for(r in o)hasProp.call(o,r)&&(t=o[r],a+='<div data-option="top-'+r+'"> <div>'+t.text+"</div> </div>")}return i=e.objApply?e.objApply:document.getElementById(e.idElement),i.innerHTML+='<div class="win-menu" data-role="win-menu" style="top:'+event.clientY+"px; left:"+event.clientX+'px;">'+a+"</div>",e.items?setTimeout(function(){var n,i;n=e.items,i=[];for(r in n)hasProp.call(n,r)&&(t=n[r],i.push(f(e.idApply,r,t.handler)));return i}):void 0},f=function(e,t,n){return document.getElementById(e).querySelector("[data-option=top-"+t+"]").onclick=function(){return l(),n(this)}},l=function(){var e;return n===!0&&(e=document.querySelectorAll("[data-role=win-menu]"),[].forEach.call(e,function(e){return e.parentNode.removeChild(e)})),n=!1},m=function(e,t){var n;return"object"==typeof e&&(n="left",e.forEach(function(e,i,a){switch(e.xtype){case"button":return r(e,t);case"buttongroup":return o(e,t);case"tbar":return A(e,t);case"panel":return p(e,t);case"tabpanel":return b(e,t);case"tab":return _(e,t);case"tbtext":return w(e,t);default:if("-"===e)return g(t);if("--"===e)return y(t);if("->"===e)return n="right",document.getElementById(t).innerHTML+='<div data-role="div-empty"></div>';
}}),"left"===n)?document.getElementById(t).innerHTML+='<div data-role="div-empty"></div>':void 0},b=function(e,n){var i,a,r,o,l,d,u;return d=e.style||"",a=e.height||"",i="",isNaN(u)||(u+="px"),isNaN(a)||(a+="px"),""!==a&&(i="calc(100% - "+a+")"),e.id?l=e.id:(t++,l="win-tabpanel-"+t),o='<div id="'+l+'" class="win-tabpanel" style="height:'+a+"; "+d+'" data-role="win-tabpanel"></div> <div id="win-tabpanel-body-'+l+'" class="win-tabpanel-body" style="height:'+i+';"></div>',document.getElementById(n).innerHTML+=o,e.items&&m(e.items,l),r=document.getElementById(l).offsetHeight,document.getElementById("win-tabpanel-body-"+l).style.height="calc(100% - "+r+"px)"},_=function(n,i){var a,r,o;return o=n.title||"",a=n.iconCls||"",n.id?r=n.id:(t++,r="win-tab-"+t),document.getElementById(i).innerHTML+='<div id="'+r+'"class="win-tab" data-activo="false" data-load="false"><span class="icon-tab form"></span><span>'+o+"</span></div>",document.getElementById("win-tabpanel-body-"+i).innerHTML+='<div id="win-tab-body-'+r+'" class="win-tab-body" style="height:100%; overflow:hidden;" data-activo="false">'+r+"</div>",setTimeout(function(){return document.getElementById(r).onclick=function(){var t;return e("#"+i+" > [data-activo=true]").attr("data-activo","false"),this.setAttribute("data-activo","true"),e("#win-tabpanel-body-"+i+" > [data-activo=true]").attr("data-activo","false"),e("#win-tab-body-"+r).attr("data-activo","true"),t=this.getAttribute("data-load"),"false"===t?(this.setAttribute("data-load","true"),n.autoLoad.idApply="win-tab-body-"+r,e.Load(n.autoLoad)):void 0}})},p=function(n,i){var a,r,o,l,d,u;return u=n.width||"160",a=n.height||"60",r=n.html||"",l=n.style||"",d=n.title||"",n.id?o=n.id:(t++,o=t),""!==d&&(a-=20,d='<div id="win-panel-title-'+o+'" style="width:'+u+"; height:20px; "+l+'" class="win-panel-title">'+d+"</div>"),isNaN(u)||(u+="px"),isNaN(a)||(a+="px"),r='<div id="win-panel-'+o+'" class="win-panel" style="width:'+u+"; height:"+a+"; "+l+'" data-role="win-panel"> '+d+' <div id="win-panel-load-'+o+'" class="win-panel-load" style="width:'+u+"; height:"+a+"; "+l+'"> '+r+" </div> </div>",document.getElementById(i).innerHTML+=r,n.autoLoad?setTimeout(function(){return n.autoLoad.idApply="win-panel-load-"+o,e.Load(n.autoLoad)}):n.items?m(n.items,"win-panel-load-"+o):void 0},A=function(e,n){var i;return e.id?i=e.id:(t++,i="win-tbar-"+t),document.getElementById(n).innerHTML+='<div id="'+i+'" class="win-tbar" data-role="win-tbar"></div>',e.items?m(e.items,""+i):void 0},o=function(e,n){var a,r,o,l,d,u,s,c,f;if(a=e.hidden||"",f=e.width||0,s=e.style||"",c=e.title||"",0===f&&e.items)for(u=e.items,l=0,d=u.length;d>l;l++)o=u[l],o.hidden||(f+=o.width>0?o.width||60:void 0);return isNaN(f)||(f+="px"),a===!0&&(a="display:none;"),e.id?r=e.id:(t++,r=t),i[r]={state:"enable",hidden:a},""!==c&&(c='<div id="win-buttongroup-title-'+r+'" style="height:20px;" class="win-buttongroup-title">'+c+"</div>"),document.getElementById(n).innerHTML+='<div id="'+r+'" class="win-buttongroup" style="width:'+f+"; "+a+" "+s+'" data-role="win-buttongroup"> '+c+' <div id="win-buttongroup-body-'+r+'" class="win-buttongroup-body" style="'+s+'"></div> </div>',e.items?m(e.items,"win-buttongroup-body-"+r):void 0},r=function(n,a){var r,o,l,d,u,s;return u=n.text||"",o=n.cls||"save",r=n.align||"top",s=n.width||50,l=n.hidden||!1,n.id?d=n.id:(t++,d="win-btn-"+t),i[d]={state:"enable",hidden:l},isNaN(s)||(s+="px"),document.getElementById(a).innerHTML+='<div id="'+d+'" class="win-btn" style="width:'+s+';" data-role="win-btn"> <button class="'+o+'">'+u+"</button> </div>",c(d),n.handler?setTimeout(function(){return document.querySelector("#"+a+" > #"+d).onclick=function(){return"disable"!==i[d].state?(e.BlockBtn(d),n.handler(this)):void 0}}):void 0},w=function(e,n){var i,a,r,o;return r=e.text||"",o=e.width||"120",a=e.style||"left",e.id?i=e.id:(t++,i="win-tbtext-"+t),document.getElementById(n).innerHTML+='<div id="'+i+'" class="win-tbtext" style="width:'+o+"; "+a+'" data-role="win-tbtext">'+r+"</div>"},g=function(e){return document.getElementById(e).innerHTML+='<div class="win-separator" data-role="win-separator">|</div>'},y=function(e){return document.getElementById(e).innerHTML+='<div class="win-separatorHeight" data-role="win-separatorHeight"></div>'},a=function(n,i){var a,r,o,l,d,u,s;return d=n.items||"",o=n.html||"",r=n.clsBody||"",s="overflow:hidden;",n.scrollY===!0?s+="overflow-y:auto;":n.scrollX===!0&&(s+="overflow-x:auto;"),n.scroll===!0&&(s="overflow:auto;"),n.idApply?l=n.idApply:(t++,l="win-body-"+t),u=document.getElementById(i),u.innerHTML+='<div id="'+l+'" class="win-body '+r+'" style="'+s+'" data-role="win-body">'+o+"</div>",a=i,setTimeout(function(){return n.autoLoad.idApply=l,e.Load(n.autoLoad)})},c=function(e){var t,n,i,a,r,o,l,d;if(document.getElementById(e))return r=document.getElementById(e).getAttribute("data-role"),(r="win-btn")&&(n=document.getElementById(e).parentNode,i=document.getElementById(e).parentNode.parentNode,a=document.getElementById(e).parentNode.parentNode.parentNode,t="",o=n.getAttribute("data-role"),l=i.getAttribute("data-role"),d=a.getAttribute("data-role"),"win-body"===o||"win-section"===o?t=n:"win-body"===l||"win-section"===l?t=i:("win-body"===d||"win-section"===d)&&(t=a),""!==t)?h(t.id):void 0},h=function(e){var t,n,i,a;return t=0,i="",n=document.querySelectorAll("#"+e+" > div, #"+e+" > form"),[].forEach.call(n,function(e){var n;return n=e.getAttribute("data-role"),""===i?"win-body"===n?void(i=e):t+=e.offsetHeight:void 0}),a=0===t?"100%":"calc(100% - "+t+"px)",""!==i?setTimeout(function(){return i.style.height=a}):void 0},u=function(e,t,n){var i,a,r,o,l,u,s,c,f,p,v;return s=document.getElementById(e),n=n||window.event,p=n.clientX,v=n.clientY,u=s.style.top.replace("px",""),l=s.style.left.replace("px",""),f=parseInt(s.offsetWidth),c=parseInt(s.offsetHeight),a=parseInt(t.offsetWidth),i=parseInt(t.offsetHeight),t.style.cursor="move",r=p-l,o=v-u,document.onmousemove=function(e){var t,n;return e=e||window.event,p=e.clientX,v=e.clientY,t=p-r,n=v-o,0>t&&(t=0),0>n&&(n=0),t+f>a&&(t=a-f),n+c>i&&(n=i-c),d(s,t,n)}},d=function(e,t,n){return e.style.left=t+"px",e.style.top=n+"px"},s=function(e){return e.style.cursor="default",document.onmousemove=function(e){return e.preventDefault}},v=function(e){var t,n,i,a,r,o,l,d,u,s,c,f,p,v,h;return v=0,h=0,p=0,f=0,c=1*e.parentNode.style.top.replace("px",""),s=1*e.parentNode.style.left.replace("px",""),u=e.parentNode,d=e.getAttribute("data-resize"),e.onmousedown=function(e){return n(e)},n=function(e){return v=e.clientX,h=e.clientY,p=parseInt(document.defaultView.getComputedStyle(u).width,10),f=parseInt(document.defaultView.getComputedStyle(u).height,10),document.documentElement.addEventListener("mousemove",t,!1),document.documentElement.addEventListener("mouseup",l,!1)},t=function(e){return"left"===d?i(e):"right"===d?a(e):"top"===d?o(e):"bottom"===d?r(e):void 0},l=function(e){return document.documentElement.removeEventListener("mousemove",t,!1),document.documentElement.removeEventListener("mouseup",l,!1)},i=function(e){return u.style.left=s+e.clientX-v+"px",u.style.width=p-e.clientX+v+"px"},o=function(e){return u.style.top=c+e.clientY-h+"px",u.style.height=f-e.clientY+h+"px"},a=function(e){return e.clientX>=500?u.style.width=p+e.clientX-v+"px":void 0},r=function(e){return e.clientY>=340?u.style.height=f+e.clientY-h+"px":void 0}}}(Win),function(e){var t;return e.Ajax=function(e){var t,n,i,a,r;if(i="","undefined"!=typeof e.params)for(a in e.params)i+=""===i?a+"="+e.params[a]:"&"+a+"="+e.params[a];return r=new XMLHttpRequest,t=e.url,n=e.method||"POST",r.open(n,t,!0),"POST"===n&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded",!0),r.onreadystatechange=function(){var t;return 4===r.readyState?(t=r,e.success(t,r)):e.failure?e.failure(r):void 0},r.send(i)},e.Load=function(e){var n,i,a,r,o,l;if(!e.idApply)return void alert("idApply Obligatorio");if("null"==typeof document.getElementById(e.idApply))return void alert("No se encontro elemento en el arbol Dom");if(a="","undefined"!=typeof e.params)for(o in e.params)a+=""===a?o+"="+e.params[o]:"&"+o+"="+e.params[o];return r=e.text||"cargando...",document.getElementById(e.idApply).innerHTML='<div class="win-content-min-load" > <div class="win-content-min-load-img"> <div class="win-min-load-ajax"></div> </div> <div class="win-content-min-load-label">'+r+"</div> </div>",l=new XMLHttpRequest,n=e.url+"?",i=e.method||"POST",l.open(i,n,!0),"POST"===i&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded",!0),l.onreadystatechange=function(){var n;return 4===l.readyState?(n=document.getElementById(e.idApply),404===l.status?n.innerHTML="Not found":(n.innerHTML=l.responseText,t(n))):void 0},l.send(a)},t=function(e){var t,n,i,a,r,o;for(o=e.getElementsByTagName("script"),a=[],n=0,i=o.length;i>n;n++)t=o[n],r=document.createElement("script"),t.parentNode.replaceChild(r,t),a.push(r.innerHTML=t.innerHTML);return a}}(Win),function($W){var GRILLA,_createAside,_createCol,_createContent,_createPagination,_createRow,_createTbar,_createTitle,_createToolbar,_insertUpdateRow;return $W.Grilla={},GRILLA={},$W.Grilla.ini=function(e,t){var n,i,a,r,o,l,d,u,s,c,f,p,v,h,m,g,y,_,b,w,A,x,T,E,L,I,C,B,W;if(null!==e)return y=e.name||"",A="",C=e.url||"",h=e.idApply||"",_=e.opcionClass||"",m=e.items||{},L=e.titleItems||{},W="100%",w=h,x=e.tbar||"",T=e.tbarHeight||"",I=e.toolbar||!1,B=e.valueToolbar||"",n=e.advancedToolbar||"disable",u=e.filterAside||"",b=e.pagina||"",g=e.maxPage||"",t=t||{},E=e.textBtnNuevo||"Nuevo",l=e.fPermisoInsert||!1,d=e.fTitle||"",o=e.fAncho||"auto",r=e.fAlto||"auto",i=e.eventInsert||"",a=e.eventUpdate||"",s="",GRILLA[y]={url:C,varPost:t},x===!0&&""===_?(_createTbar(y,C,h,o,r,d,E,l,i),T=document.getElementById("grilla_tbar_"+y).offsetHeight,s="height:calc(100% - "+T+"px)"):s="height:100%",I!==!1&&(A='style="height:calc(100% - 28px);"',v=_createToolbar(y,C,n)),c=_createAside(y,u),f=_createContent(y,C,_,b,g,A,L,m,a,o,r,d),""!==c&&(W="calc(100% - 205px)"),""===_?p='<div id="grilla_ventana_'+y+'" class="grilla_ventana" style="'+s+';"> '+c+' <div id="grilla_'+y+'" class="grilla_load" style="width:'+W+';"> '+v+" "+f+" </div> </div>":(w="grilla_"+y,p=""+v+f),document.getElementById(w).innerHTML+=p,$W("#grilla_toolbar_reload_"+y).on("click",function(){return $W.Grilla.buscar(y,C)}),$W("#grilla_content_page_"+y+" .grilla_page").on("click",function(){return $W.Grilla.pagination(this,y,B,b,g,C)}),"filterField"===_?(document.getElementById("field_buscar_"+y).value=B,document.getElementById("field_buscar_"+y).focus()):void 0},$W.Grilla.fOpen=function(name,url,id,width,height,title,autoScroll){var opcionClass,params,state;if(!(id>0&&(state=document.getElementById("grilla_fila_"+name+"_"+id).getAttribute("data-state"),"fDelete"===state)))return opcionClass=id>0?"vUpdate":"vInsert",params=GRILLA[name].varPost,params.indexClass=id,params.opcionClass=opcionClass,eval("window.Win_grilla_form_"+name+' = $W.Window({ id       : "Win_grilla_form_'+name+'", width    : width, height   : height, title    : title, modal    : true, closable : true, drag     : true, resize   : true, scroll   : false, autoLoad : { url    : url, params : params } })')},$W.Grilla.inputBuscar=function(e,t,n){var i;return i=document.all?e.keyCode:e.which,13===i&&$W.Grilla.buscar(t,n),!0},$W.Grilla.buscar=function(e,t){var n,i,a;return a=document.getElementById("field_buscar_"+e).value,n=document.getElementById("grilla_type_search_"+e).getAttribute("data-search"),i=GRILLA[e].varPost,i.opcionClass="filterField",i.valueToolbar=a,i.advancedToolbar=n,$W.Load({idApply:"grilla_"+e,url:t,params:i})},$W.Grilla.eventAside=function(e,t){var n,i,a;return a=e.getAttribute("data-state"),i=document.getElementById("grilla_"+t),n=document.getElementById("grilla_aside_"+t),"open"===a?(n.style.width="16px",i.style.width="calc(100% - 21px)",e.setAttribute("data-state","close")):(n.style.width="200px",i.style.width="calc(100% - 205px)",e.setAttribute("data-state","open"))},$W.Grilla.pagination=function(e,t,n,i,a,r){var o,l,d,u;return l=0,a=1*a,i=1*i,o=e.getAttribute("data-type"),u=document.getElementById("grilla_content_"+t).parentNode,"next"===o&&i===a||"prev"===o&&1===i||"last"===o&&i===a||"first"===o&&1===i?void 0:("next"===o?l=i+1:"prev"===o?l=i-1:"last"===o?l=a:"first"===o&&(l=1),d=GRILLA[t].varPost,d.pagina=l,d.opcionClass="paginacion",d.valueToolbar=n,$W.Load({idApply:u.id,url:r,params:d}))},$W.Grilla.updateRow=function(e,t){var n,i,a,r;return r=GRILLA[e].url,i="updateRow",a=GRILLA[e].varPost,a.indexClass=t,a.opcionClass=i,n=document.getElementById("grilla_fila_cont_"+e+"_"+t).innerHTML,$W.Ajax({url:r,params:a,success:function(a,o){var l;return l=JSON.parse(a.responseText),document.getElementById("grilla_content_fila_"+e+"_"+t).innerHTML=_createRow(e,r,i,l.items,l.eventUpdate,l.fAncho,l.fAlto,l.fTitle),document.getElementById("grilla_fila_cont_"+e+"_"+t).innerHTML=n,document.getElementById("grilla_fila_image_"+e+"_"+t).setAttribute("data-icon","fUpdate")},failure:function(e){return console.log("fail")}})},_insertUpdateRow=function(name,url,xhrResponse,opcionClass){var body,contDiv,eventUpdate,fAlto,fAncho,fTitle,items,json;return json=JSON.parse(xhrResponse.responseText),"true"!==json.estado?alert(json.msj):(items=json.items||{},fTitle=json.fTitle||"",fAncho=json.fAncho||"",fAlto=json.fAlto||"",eventUpdate=json.eventUpdate||"","fInsert"===opcionClass||"insertRow"===opcionClass?(body=document.getElementById("grilla_body_"+name),body.lastChild&&(contDiv=body.lastChild.getAttribute("data-cont"),contDiv++),body.innerHTML+=_createRow(name,url,opcionClass,items,eventUpdate,fAncho,fAlto,fTitle),contDiv>0&&(document.getElementById("grilla_fila_cont_"+name+"_"+json.indexClass).innerHTML=contDiv,document.getElementById("grilla_content_fila_"+name+"_"+json.indexClass).setAttribute("data-cont",contDiv))):"fUpdate"===opcionClass&&(contDiv=document.getElementById("grilla_fila_cont_"+name+"_"+json.indexClass).innerHTML,document.getElementById("grilla_content_fila_"+name+"_"+json.indexClass).innerHTML=_createRow(name,url,opcionClass,items,eventUpdate,fAncho,fAlto,fTitle),document.getElementById("grilla_fila_cont_"+name+"_"+json.indexClass).innerHTML=contDiv),"fInsert"===opcionClass||"fUpdate"===opcionClass?eval("Win_grilla_form_"+name+".close();"):void 0)},$W.Grilla.insertRow=function(e,t){var n,i,a;return a=GRILLA[e].url,n="insertRow",i=GRILLA[e].varPost,i.indexClass=t,i.opcionClass=n,$W.Ajax({url:a,params:i,success:function(t,i){return _insertUpdateRow(e,a,t,n)},failure:function(e){return console.log("fail")}})},$W.Form.fSave=function(e,t,n,i){var a,r,o,l,d,u,s,c,f,p;for(c={},a=[],s="",r=0,f=n>0?"fUpdate":"fInsert",a[0]=document.querySelectorAll("#form_"+e+" input"),a[1]=document.querySelectorAll("#form_"+e+" select"),a[2]=document.querySelectorAll("#form_"+e+" textarea"),d=0,u=a.length;u>d;d++)o=a[d],[].forEach.call(o,function(t){var n,i,a,o,l,d;return a=t.id,d=t.value,o=t.getAttribute("data-label"),l=t.getAttribute("data-required"),""===d&&"true"===l&&(r++,s+="\n* "+o),i=a.replace("form_"+e+"_",""),c[i]=d,"select"!==t.tagName&&"SELECT"!==t.tagName||(n=t.getAttribute("data-textdb"),""===n)?void 0:c[n]=t.options[t.selectedIndex].text});return l=JSON.stringify(c),1===r?void alert("El siguiente campo es obligatorio"+s):r>1?void alert("Los siguientes campos son obligatorios"+s):(p=i,p.indexClass=n,p.opcionClass=f,p.jsonFormValue=l,$W.Ajax({url:t,params:p,success:function(n,i){return _insertUpdateRow(e,t,n,f)},failure:function(e){return console.log("fail")}}))},$W.Form.fDelete=function(name,url,indexClass,varPost){var params;return params=varPost,params.indexClass=indexClass,params.opcionClass="fDelete",$W.Ajax({url:url,params:params,success:function(result,xhr){var arrayDivHtml,json;return json=JSON.parse(result.responseText),"true"===json.estado?(document.getElementById("grilla_fila_"+name+"_"+indexClass).setAttribute("data-state","fDelete"),document.getElementById("grilla_fila_image_"+name+"_"+indexClass).setAttribute("data-icon","fDelete"),arrayDivHtml=document.querySelectorAll("#grilla_fila_"+name+"_"+indexClass+" [data-type=html]"),[].forEach.call(arrayDivHtml,function(e){return e.innerHTML=""}),eval("Win_grilla_form_"+name+".close();")):console.log("false")},failure:function(e){return console.log("fail")}})},$W.Grilla.typeSearch=function(e){var t;if(t=e.getAttribute("data-search"),"disable"===t){if(!confirm("Desea habilitar la busqueda avanzada?"))return;return e.setAttribute("data-search","enable")}return e.setAttribute("data-search","disable")},_createAside=function(e,t){var n,i,a;n="";for(i in t)hasProp.call(t,i)&&(a=t[i],n+='<div class="grilla-aside-title">'+a.title+"</div>");return""!==n&&(n='<aside id="grilla_aside_'+e+'" style="width:200px;"> <div class="grilla-aside-head" data-state="open" onclick="$W.Grilla.eventAside(this, \''+e+"')\">TITLE OR ICON</div> "+n+" </aside>"),n},_createToolbar=function(e,t,n){return'<div id="grilla_toolbar_'+e+'" class="grilla_toolbar"> <div> <div class="grilla_toolbar_input"> <input type="text" id="field_buscar_'+e+'" onKeyUp="$W.Grilla.inputBuscar(event,\''+e+"','"+t+'\')"/> </div> <div data-search="'+n+'" title="Busquedas avanzada" id="grilla_type_search_'+e+'" class="grilla_type_search" onclick="$W.Grilla.typeSearch(this)"></div> <div id="grilla_toolbar_reload_'+e+'" class="grilla_toolbar_reload"></div> </div> </div>'},_createContent=function(e,t,n,i,a,r,o,l,d,u,s,c){var f,p,v;return f=_createRow(e,t,n,l,d,u,s,c),p=_createPagination(e,i,a),v=_createTitle(e,o),'<div id="grilla_content_'+e+'" class="grilla_content" '+r+'> <div id="grilla_title_'+e+'" class="grilla_title" style="min-width:'+v.width+'px;">'+v.html+'</div> <div id="grilla_body_'+e+'" class="grilla_body" style="min-width:'+v.width+'px;">'+f+'</div> <div class="grilla_footer" style="min-width:'+v.width+'px;">'+p+"</div> </div>"},_createTitle=function(e,t){var n,i,a,r;r=75,n='<div class="grilla_title_label">No.</div>';for(i in t)hasProp.call(t,i)&&(a=t[i],r+=a.width,n+='<div class="grilla_title_label" style="width:'+a.width+'px;">'+a.title+"</div>");return{html:n,width:r}},_createRow=function(e,t,n,i,a,r,o,l){var d,u,s,c,f,p,v;c="",u=0;for(p in i)hasProp.call(i,p)&&(d=i[p],u++,f=_createCol(e,p,d),s="",s=a===!0?"$W.Grilla.fOpen('"+e+"', '"+t+"', '"+p+"', '"+r+"', '"+o+"', '"+l+"',true)":""===a?"":a+"("+p+", this.id)",v='<div id="grilla_fila_'+e+"_"+p+'" class="grilla_fila" ondblclick="'+s+'" data-state="'+n+'" data-index="'+p+'"> <div id="MuestraToltip_'+e+"_"+p+'" class="grilla_col_first"> <div id="grilla_fila_image_'+e+"_"+p+'" class="grilla_fila_image" data-icon="'+n+'"></div> <div id="grilla_fila_cont_'+e+"_"+p+'" class="grilla_fila_cont">'+u+"</div> </div> "+f+" </div>",c+="fUpdate"!==n&&"updateRow"!==n?'<div id="grilla_content_fila_'+e+"_"+p+'" class="grilla_content_fila" data-index="'+p+'" data-cont="'+u+'" style="float:left; width:100%;">'+v+"</div>":v);return c},_createCol=function(e,t,n){var i,a,r;i="";for(a in n)hasProp.call(n,a)&&(r=n[a],i+='<div id="div_'+e+"_"+a+"_"+t+'" class="grilla_celdas" style="float:left; width:'+r.width+"px; "+r.style+'" data-type="'+r.type+'">'+r.html+"</div>");return i},_createTbar=function(name,url,idApply,fAncho,fAlto,fTitle,textBtnNuevo,fPermisoInsert,eventInsert){return document.getElementById(idApply).innerHTML+='<div id="grilla_tbar_'+name+'"></div>',fPermisoInsert===!0||"true"===fPermisoInsert?$W.Tbar({idApply:"grilla_tbar_"+name,items:[{xtype:"button",id:"btn_"+name+"_new",cls:"grilla_add_24",text:textBtnNuevo,handler:function(){return eventInsert===!0?$W.Grilla.fOpen(name,url,"",fAncho,fAlto,fTitle,!0):""!==eventInsert?eval(eventInsert+"()"):void 0}}]}):void 0},_createPagination=function(e,t,n){var i;return i="",n>1&&(i='<div id="grilla_content_page_'+e+'" class="grilla_content_page"> <div>Pagina '+t+" de "+n+'</div> <div data-type="first" class="grilla_page"></div> <div data-type="prev" class="grilla_page"></div> <div data-type="next" class="grilla_page"></div> <div data-type="last" class="grilla_page"></div> </div>'),i}}(Win)}).call(this);