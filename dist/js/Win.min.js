/**
 * win - Libreria para web aplicaciones RIA
 * @version v0.0.1
 * @link    https://github.com/jhon3rick/Win.js#readme
 * @author  Jhon Marroquin (Twitter @jhon3rick || email jhon3rick@gmail.com)
 * @license (MIT)
 */
(function(){"use strict";var Win,hasProp={}.hasOwnProperty;Win=function(){var e,t,n,i,r,a,o,l,d,u;return i=[],o=Object.prototype,a=/^\s*<(\w+|!)[^>]*>/,n=[1,9,11],t=/^\.([\w-]+)$/,r=/^#[\w\d-]+$/,l=/^[\w-]+$/,e=function(t,n){var i;return t?"function"===e.toType(t)?e(document).ready(t):(i=d(t,n),u(i,t)):u()},e.query=function(e,n){var i;return t.test(n)?i=e.getElementsByClassName(n.replace(".","")):l.test(n)?i=e.getElementsByTagName(n):r.test(n)&&e===document?(i=e.getElementById(n.replace("#","")),i||(i=[])):i=e.querySelectorAll(n),i.nodeType?[i]:Array.prototype.slice.call(i)},e.toType=function(e){var t;return t=o.toString.call(e).match(/\s([a-z|A-Z]+)/),t.length>1?t[1].toLowerCase():"object"},e.each=function(t,n){var i,r,a,o,l;if(r=void 0,o=void 0,"array"===e.toType(t))for(r=a=0,l=t.length;l>a;r=++a)i=t[r],n.call(i,r,i)===!1;else for(o in t)n.call(t[o],o,t[o])===!1;return t},u=function(e,t){return null==t&&(t=""),e=e||i,e.selector=t,e.__proto__=u.prototype,e},d=function(t,i){var r,o;return r=null,o=e.toType(t),"array"===o?r=_compact(t):"string"===o&&a.test(t)?(r=_fragment(t.trim(),RegExp.$1),t=null):"string"===o?(r=e.query(document,t),i&&(r=1===r.length?e.query(r[0],i):e.map(function(){return e.query(r,i)}))):(n.indexOf(t.nodeType)>=0||t===window)&&(r=[t],t=null),r},u.prototype=e.fn={},e.fn.each=function(e){return this.forEach(function(t,n){return e.call(t,n,t)}),this},e.fn.forEach=i.forEach,e.version="0.0.1",e}(),this.Win=this.$W=Win,"undefined"!=typeof module&&null!==module&&(module.exports=Win),function(e){return e.ini=function(t){var n,i,r,a,o,l;if(t.theme){for(o=e("head > link"),r=0,a=o.length;a>r;r++)if(i=o[r],/Win-theme/g.test(i.getAttribute("href")))return n=i.getAttribute("href").split("Win-theme",1),void i.setAttribute("href",n+t.theme);return l=document.createElement("link"),l.setAttribute("rel","stylesheet"),l.setAttribute("href",t.theme),e("head")[0].appendChild(l)}}}(Win),function(e){return e.fn.attr=function(t,n){return this.length>0&&"string"===e.toType(t)?null!=n?this.each(function(){return this.setAttribute(t,n)}):this[0].getAttribute(t):void 0},e.fn.removeAttr=function(t){return this.length>0&&"string"===e.toType(t)?this.each(function(){return this.removeAttribute(t)}):void 0},e.fn.data=function(e,t){return this.attr("data-"+e,t)},e.fn.removeData=function(e){return this.removeAttr("data-"+e)},e.fn.val=function(e){return null!=e?this.each(function(){return this.value=e.toString()}):this.length>0?this[0].value:null},e.fn.show=function(){return this.style("display","block")},e.fn.hide=function(){return this.style("display","none")},e.fn.focus=function(){return this[0].focus()},e.fn.blur=function(){return this[0].blur()},e.fn.offset=function(){var e,t;return this.length>0&&(e=this[0].getBoundingClientRect(),t={left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}),t}}(Win),function(e){var t,n,i;return t=["-webkit-","-moz-","-ms-","-o-",""],e.fn.addClass=function(e){return this.each(function(){var t,i,r,a,o;for(r=n(e),a=[],t=0,i=r.length;i>t;t++)o=r[t],a.push(this.classList.add(o));return a})},e.fn.removeClass=function(e){return this.each(function(){var t,i,r,a,o;for(r=n(e),a=[],t=0,i=r.length;i>t;t++)o=r[t],a.push(this.classList.remove(o));return a})},e.fn.toggleClass=function(e){return this.each(function(){var t,i,r,a,o;for(r=n(e),a=[],t=0,i=r.length;i>t;t++)o=r[t],a.push(this.classList.toggle(o));return a})},e.fn.hasClass=function(e){return this.length>0&&this[0].classList.contains(e)},e.fn.listClass=function(){return this.length>0?this[0].classList:void 0},e.fn.style=e.fn.css=function(e,t){var n;return null!=t?this.each(function(){return this.style[e]=t}):(n=this[0],n.style[e]||i(n,e))},e.fn.vendor=function(e,n){var i,r,a,o;for(o=[],i=0,r=t.length;r>i;i++)a=t[i],o.push(this.style(""+a+e,n));return o},i=function(e,t){return document.defaultView.getComputedStyle(e,"")[t]},n=function(e){return Array.isArray(e)||(e=[e]),e}}(Win),function(e){var t,n,i,r,a,o,l,d,u,s,c,f,p;return t=1,r={},i={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},n={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touch:"click",orientationchange:"resize"},a=/complete|loaded|interactive/,e.fn.on=function(t,n,i){return null==n||"function"===e.toType(n)?this.bind(t,n):this.delegate(n,t,i)},e.fn.off=function(t,n,i){return null==n||"function"===e.toType(n)?this.unbind(t,n):this.undelegate(n,t,i)},e.fn.ready=function(t){return a.test(document.readyState)?t.call(this,e):e.fn.addEvent(document,"DOMContentLoaded",function(){return t.call(this,e)})},e.fn.bind=function(e,t){return this.forEach(function(n){return f(n,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){return p(this,e,t)})},e.fn.delegate=function(t,n,i){return this.each(function(r,a){return f(a,n,i,t,function(n){return function(i){var r,l;return l=e(i.target).closest(t,a).get(0),l?(r=e.extend(o(i),{currentTarget:l,liveFired:a}),n.apply(l,[r].concat([].slice.call(arguments,1)))):void 0}})})},e.fn.undelegate=function(e,t,n){return this.each(function(){return p(this,t,n,e)})},e.fn.trigger=function(t,n,i){return"string"===e.toType(t)&&(t=u(t,n)),null!=i&&(t.originalEvent=i),this.each(function(){return this.dispatchEvent(t)})},e.fn.addEvent=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},e.fn.removeEvent=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},u=function(e,t){var n;return n=document.createEvent("Events"),n.initEvent(e,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null),t&&(n.touch=t),n},f=function(t,n,i,a,o){var u,s,f,p;return n=d(n),f=c(t),s=r[f]||(r[f]=[]),u=o&&o(i,n),p={event:n,callback:i,selector:a,proxy:l(u,i,t),delegate:u,index:s.length},s.push(p),e.fn.addEvent(t,p.event,p.proxy)},p=function(t,n,i,a){var o;return n=d(n),o=c(t),s(o,n,i,a).forEach(function(n){return delete r[o][n.index],e.fn.removeEvent(t,n.event,n.proxy)})},c=function(e){return e._id||(e._id=t++)},d=function(t){var i;return i=("function"==typeof e.isMobile?e.isMobile():void 0)?t:n[t],i||t},l=function(e,t,n){var i;return t=e||t,i=function(e){var i;return i=t.apply(n,[e].concat(e.data)),i===!1&&e.preventDefault(),i}},s=function(e,t,n,i){return(r[e]||[]).filter(function(e){return e&&(!t||e.event===t)&&(!n||e.callback===n)&&(!i||e.selector===i)})},o=function(t){var n;return n=e.extend({originalEvent:t},t),e.each(i,function(e,i){return n[e]=function(){return this[i]=function(){return!0},t[e].apply(t,arguments)},n[i]=function(){return!1}}),n}}(Win),function(e){var t,n,i,r;return t="parentNode",e.fn.find=function(t){var n;return n=1===this.length?Quo.query(this[0],t):this.map(function(){return Quo.query(this,t)}),e(n)},e.fn.parent=function(e){var r;return r=e?i(this):this.instance(t),n(r,e)},e.fn.children=function(e){var t;return t=this.map(function(){return Array.prototype.slice.call(this.children)}),n(t,e)},e.fn.siblings=function(e){var t;return t=this.map(function(e,t){return Array.prototype.slice.call(t.parentNode.children).filter(function(e){return e!==t})}),n(t,e)},e.fn.get=function(e){return this[e]||null},e.fn.first=function(){return e(this[0])},e.fn.last=function(){return e(this[this.length-1])},e.fn.closest=function(t,n){var i,r;for(r=this[0],i=e(t),i.length||(r=null);r&&i.indexOf(r)<0;)r=r!==n&&r!==document&&r.parentNode;return e(r)},e.fn.next=function(){return r.call(this,"nextSibling")},e.fn.prev=function(){return r.call(this,"previousSibling")},e.fn.instance=function(e){return this.map(function(){return this[e]})},e.fn.map=function(t){return e.map(this,function(e,n){return t.call(e,n,e)})},i=function(t){var n;for(n=[];t.length>0;)t=e.map(t,function(e){return e=e.parentNode,e!==document&&n.indexOf(e)<0?(n.push(e),e):void 0});return n},n=function(t,n){return null!=n?e(t).filter(n):e(t)},r=function(t){var n;for(n=this[0][t];n&&1!==n.nodeType;)n=n[t];return e(n)}}(Win),function(e){return e.fn.text=function(e){return null!=e?this.each(function(){return this.textContent=e}):this.length>0?this[0].textContent:""},e.fn.html=function(t){var n;return null!=t?(n=e.toType(t),this.each(function(){return"string"===n?this.innerHTML=t:"array"===n?t.forEach(function(t){return function(n){return e(t).html(n)}}(this)):this.innerHTML+=e(t).html()})):this.length>0?this[0].innerHTML:""},e.fn.remove=function(){return this.each(function(){return null!=this.parentNode?this.parentNode.removeChild(this):void 0})},e.fn.empty=function(){return this.each(function(){return this.innerHTML=null})},e.fn.append=function(t){var n;return n=e.toType(t),this.each(function(){return"string"===n?this.insertAdjacentHTML("beforeend",t):"array"===n?t.forEach(function(t){return function(n){return e(t).append(n)}}(this)):this.appendChild(t)})},e.fn.prepend=function(t){var n;return n=e.toType(t),this.each(function(){return"string"===n?this.insertAdjacentHTML("afterbegin",t):"array"===n?t.each(function(e){return function(t,n){return e.insertBefore(n,e.firstChild)}}(this)):this.insertBefore(t,this.firstChild)})},e.fn.replaceWith=function(t){var n;return n=e.toType(t),this.each(function(){return this.parentNode?"string"===n?this.insertAdjacentHTML("beforeBegin",t):"array"===n?t.each(function(e){return function(t,n){return e.parentNode.insertBefore(n,e)}}(this)):this.parentNode.insertBefore(t,this):void 0}),this.remove()}}(Win),function(e){var t,n,i,r,a,o,l,d,u,s,c,f,p,v,h;return e.Form={},e.Form.ini=function(n){var i,r,a,o,d,u,s,c,f,p,v;return s=n.indexClass||"",c=n.name||"",v=n.url||"",p=n.size||{},o=n.field||{},f=n.opcionClass||"",u="parent_form_"+c,a=n.fTbar||!1,r=n.btnInsert||"",i=n.btnDelete||"",d=l(c,o,p),document.getElementById(u).innerHTML+='<div id="form_tbar_'+c+'" style="margin:0; padding:0;"></div> <form name="form_'+c+'" id="form_'+c+'" onsubmit="return false;" style="float:left; width:100%; overflow:auto;"> <div style="float:left; padding:10px; width:'+p.fBodyAncho+'px; overflow:hidden;">'+d+"<div> </form>",a===!0&&t(c,f,v,s,r,i),e.Form.validate(u)},t=function(t,n,i,r,a,o){var l,d;return l=[],d="vUpdate"===n?"Actualizar":"Guardar",a===!0&&l.push({xtype:"button",id:"fInsert_"+t,cls:"user_black_36",text:d,handler:function(){return e.Grilla.fSave(t,i,r)}}),o===!0&&"vUpdate"===n&&l.push({xtype:"button",id:"fDelete_"+t,cls:"user_black_36",text:"Eliminar",handler:function(){return e.Grilla.fDelete(t,i,r)}}),e.Tbar({idApply:"form_tbar_"+t,items:l})},l=function(e,t,i){var l,d,u;d="";for(l in t)if(hasProp.call(t,l))switch(u=t[l],u.type){case"TextField":d+=o(e,l,u,i);break;case"ComboBox":d+=n(e,l,u,i);break;case"TextArea":d+=a(e,l,u,i);break;case"Separador":d+=r(u)}return d},o=function(e,t,n,i){var r,a,o,l;return o="text",r="block",l=n.validate||"",""!==l&&(l='data-validate="'+l+'"'),(n.hidden===!0||"true"===n.hidden||"hidden"===n.hidden)&&(o="hidden",r="none"),a=n.required===!0&&""===n.value?"empy":"none",'<div id="form_content_field_'+e+"_"+t+'" class="form_content_field" style="width:'+i.fDivAncho+"px; min-height:"+i.fDivAlto+"px; position:relative; display:"+r+'"> <div id="form_label_'+e+"_"+t+'" class="form_label" style="width:'+i.fLabelAncho+'px; position:relative;">'+n.label+'</div> <div id="form_field_'+e+"_"+t+'" class="form_field" style="'+i.fFieldAncho+'px; position:relative;"> <input type="'+o+'" id="form_'+e+"_"+t+'" value="'+n.value+'" style="width:'+n.width+'px;" data-required="'+n.required+'" data-style="'+a+'" data-label="'+n.label+'" '+l+"/> </div> </div>"},n=function(e,t,n,r){var a,o,l;return l=n.required===!0&&""===n.value?"empy":"none",o=n.option||{},a=i(n.value,o),'<div id="form_content_field_'+e+"_"+t+'" class="form_content_field" style="width:'+r.fDivAncho+"px; min-height:"+r.fDivAlto+'px;"> <div id="form_label_'+e+"_"+t+'" class="form_label" style="width:'+r.fLabelAncho+'px;">'+n.label+'</div> <div id="form_field_'+e+"_"+t+'" class="form_field" style="'+r.fFieldAncho+'"> <select id="form_'+e+"_"+t+'" style="width:'+n.width+'px;" data-required="'+n.required+'" data-style="'+l+'" data-label="'+n.label+'">'+a+"</select> </div> </div>"},i=function(e,t){var n,i,r,a;n='<option value="">Seleccione...</option>';for(i in t)hasProp.call(t,i)&&(r=t[i],a=r.index===e?"selected":"",n+='<option value="'+r.index+'" '+a+">"+r.value+"</option>");return n},a=function(e,t,n,i){var r;return r=n.required===!0&&""===n.value?"empy":"none",'<div id="form_content_field_'+e+"_"+t+'" class="form_content_field" style="width:'+i.fDivAncho+"px; min-height:"+i.fDivAlto+'px;"> <div id="form_label_'+e+"_"+t+'" class="form_label" style="width:'+i.fLabelAncho+'px;">'+n.label+'</div> <div id="form_field_'+e+"_"+t+'" class="form_field" style="'+i.fFieldAncho+'"> <textarea id="form_'+e+"_"+t+'" style="width:'+n.width+"px; height:"+n.height+'px;" data-required="'+n.required+'" data-style="'+r+'" data-label="'+n.label+'">'+n.value+"</textarea> </div> </div>"},r=function(e){return'<div class="form_separador"> <div style="width:80%; float:left">'+e.text+"</div> </div>"},e.Form.field=function(t){switch(t.type){case"integer":return e("#"+t.idApply).addClass+=" win-input-number",e("#"+t.idApply)[0].onkeypress=function(e){return c({event:e,eventType:"keypress",input:this})},e("#"+t.idApply)[0].onchange=function(e){return c({event:e,eventType:"change",input:this})};case"double":return e("#"+t.idApply).addClass+=" win-input-number",e("#"+t.idApply)[0].onkeypress=function(e){return u({event:e,eventType:"keypress",input:this})},e("#"+t.idApply)[0].onchange=function(e){return u({event:e,eventType:"change",input:this})};case"text":return e("#"+t.idApply)[0].onkeyup=function(e){return v({event:e,eventType:"keyup",input:this,option:t.option})},e("#"+t.idApply)[0].onchange=function(e){return v({event:e,eventType:"change",input:this,option:t.option})};case"email":return e("#"+t.idApply)[0].onchange=function(e){return s({event:e,input:this})};case"date":return d(t);case"percent":return e("#"+t.idApply)[0].onkeydown=function(e){return 13===e.keyCode?p({event:e,eventType:"keypress",input:this}):void 0},e("#"+t.idApply)[0].onchange=function(e){return p({event:e,input:this})}}},e.Form.validate=function(e){var t;return t=document.getElementById(e).querySelectorAll("input, textarea, select"),[].forEach.call(t,function(e){var t;switch(t=e.getAttribute("data-validate")){case"integer":return e.className+=" win-input-number",e.onkeypress=function(e){return c({event:e,eventType:"keypress",input:this})},e.onchange=function(e){return c({event:e,eventType:"change",input:this})};case"double":return e.className+=" win-input-number",e.onkeypress=function(e){return u({event:e,eventType:"keypress",input:this})},e.onchange=function(e){return u({event:e,eventType:"change",input:this})};case"upercase":return e.onkeyup=function(e){return h({event:e,eventType:"keyup",input:this})},e.onchange=function(e){return h({event:e,eventType:"change",input:this})};case"lowercase":return e.onkeyup=function(e){return f({event:e,eventType:"keyup",input:this})},e.onchange=function(e){return f({event:e,eventType:"change",input:this})};case"email":return e.onchange=function(e){return s({event:e,input:this})};case"percent":return e.onchange=function(e){return p({event:e,input:this})};case"date":return d(obj);default:return e.onkeyup=function(e){return v({event:e,eventType:"keyup",input:this})},e.onchange=function(e){return v({event:e,eventType:"change",input:this})}}})},c=function(e){var t;return t=document.all?e.event.keyCode:e.event.which,8===t||9===t||0===t||13===t?!0:"keypress"===e.eventType?/\d/.test(String.fromCharCode(t)):"change"===e.eventType?e.input.value=e.input.value.replace(/[^\d.]/g,""):void 0},u=function(e){var t,n,i;return n=document.all?e.event.keyCode:e.event.which,8===n||9===n||0===n||13===n?!0:"keypress"===e.eventType?/[\d.]/.test(String.fromCharCode(n)):"change"!==e.eventType||(e.input.value=e.input.value.replace(/[^\d.]/g,""),i=!!e.input.value.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/))?void 0:(t=e.input.value.split("."),e.input.value=t[0]+"."+t[1])},v=function(e){var t;return t=document.all?e.event.keyCode:e.event.which,8===t||9===t||0===t||13===t?!0:"keyup"===e.eventType||"change"===e.eventType?e.input.value=e.input.value.replace(/[\#\-\"\'|^\s+|\s+$]/g,""):void 0},h=function(e){var t;return t=document.all?e.event.keyCode:e.event.which,8===t||9===t||0===t||13===t?!0:"keyup"===e.eventType?(e.input.value=e.input.value.toUpperCase(),e.input.value=e.input.value.replace(/[\#\-\"\'|^\s+|\s+$]/g,"")):"change"===e.eventType?e.input.value=e.input.value.replace(/[\#\-\"\'|^\s+|\s+$]/g,""):void 0},f=function(e){var t;if(t=document.all?e.event.keyCode:e.event.which,8===t||9===t||0===t||13===t)return!0;if("keyup"===e.eventType){if("uppercase"===e.option)return e.input.value=e.input.value.toLowerCase()}else if("change"===e.eventType)return e.input.value=e.input.value.replace(/[\#\-\"\'|^\s+|\s+$]/g,"")},s=function(e){var t;return t=!!e.input.value.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i),t?void 0:(e.input.value="",e.input.focus())},p=function(e){var t,n,i;return t=1*e.input.getAttribute("data-max"),n=1*e.input.getAttribute("data-min"),i=1*e.input.value,t>=i?i>=n?console.log("valor aceptado"):(alert("no se aceptan  menores a "+n),e.input.value="",e.input.focus()):(alert("no se aceptan muneros mayores a"+t),e.input.value="",e.input.focus()),!0},d=function(t){var n,i,r,a,o,l,d,u,s,c,f,p,v,h,m,y,g,_,w,b,x,A,T,E,C,L;return E="-",g=t.idApply,m=t.format||"y-m-d",b=t.selected||"",w=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],h=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],L=["D","L","M","M","J","V","S"],_=e("#"+g)[0],_.dataset.icon="date","undefined"!=typeof t.value&&(_.value=t.value),v=[],E=m.replace(/[a-zA-Z\d\s]/g,"")[0],y=m.replace(/[^a-zA-Z\d\s]/g,""),C=_.value.replace(/[^\d]/g,""),""===_.value?(T=(new Date).getFullYear(),A=(new Date).getMonth(),x=(new Date).getDate()):(v[y[0]]=C[0],v[y[1]]=C[1],v[y[2]]=C[2],T=new Date(v.y).getFullYear(),A=new Date(v.m).getMonth(),x=new Date(v.d).getDate()),_.readOnly=!0,_.onclick=function(){return e("#date_"+g)[0]?void c(e("#date_"+g)[0]):(r(this),p(this))},r=function(t){var n,a,o,l,c,v,h,m,y,w,b,x,E,C,I,k,B,W;for(v='<table id="win-calendar-year-'+g+'" cellpadding="0" cellspacing="0" class="win-calendar-year" style="display:block;"></table>\n<table id="win-calendar-'+g+'" cellpadding="0" cellspacing="0" class="win-calendar">\n	<tr>\n		<td id="prev-month-'+g+'" class="calendar-change"> < </td>\n		<td id="title-date-'+g+'" colspan="5" class="calendar-header">'+s(A)+" "+T+('</td>\n	<td id="next-month-'+g+'" class="calendar-change"> > </td>\n</tr>\n<tr class="weekDaysTitleRow">'),h=0,y=L.length;y>h;h++)n=L[h],v+="<td>"+n+"</td>";for(a=d(T,A),I=u(T,A),x=0,E=1,7!==I?(x=Math.ceil((I+1+a)/7),b=I+1):b=0,W=(new Date).getDate(),k=(new Date).getMonth(),B=(new Date).getFullYear(),l=m=0,C=x;C>=0?C>m:m>C;l=C>=0?++m:--m){for(v+='<tr class="weekDaysRow">',c=w=0;7>w;c=++w)v+=E===W&&T===B&&A===k&&0===b?'<td id="today" class="weekDaysCell">':'<td class="weekDaysCell">',0===b&&(a>=E&&(v+="<a>"+E+"</a>"),E++),v+="</td>",b>0&&b--;v+="</tr>"}return v+="</table>",e("#date_"+g).length>0?e("#date_"+g).html(v):(o=document.createElement("div"),o.innerHTML=v,o.setAttribute("id","date_"+g),o.setAttribute("class","win-calendar-parent"),e("#"+g)[0].parentNode.insertBefore(o,e("#"+g)[0].nextSibling),f(_,o)),e("#title-date-"+g)[0].onclick=function(){var e;return e=1*this.innerHTML.split(" ")[1],i(e-5)},e("#prev-month-"+g)[0].onclick=function(){return A--,0>A&&(A=11,T--),r(t),p(t)},e("#next-month-"+g)[0].onclick=function(){return A++,A>11&&(A=0,T++),r(t),p(t)}},i=function(t){var r,a,o,l,d,u,s,c;for(s=t,c=t+6,u="",a=l=0;6>l;a=++l)o=a+6,u+='<div> <div class="date-change-month">'+w[a].substr(0,3)+'</div> <div class="date-change-month">'+w[o].substr(0,3)+"</div> </div>";for(r='<tr> <td colspan="2" rowspan="7" class="content-month">'+u+'</td> <td colspan="2" class="content-year"> <div id="change-year-down-'+g+'" class="calendar-change" style="float:left;"> < </div> <div id="change-year-top-'+g+'" class="calendar-change" style="float:right;"> > </div> </td> </tr>',a=d=0;6>d;a=++d)r+="<tr> <td>"+s++ +"</td> <td>"+c++ +"</td> </tr>";return r+='<tr style="border-top:1px solid #fff;"> <td colspan=2 style="padding:0px; border-right:1px solid #fff;"> <input type="button" style="width:100%; padding:3px;" value="Aceptar"> </td> <td colspan=2 style="padding:0px;"> <input type="button" style="width:100%; padding:3px;" value="Volver" id="boton-back-calendar-'+g+'"> </td> </tr>',e("#win-calendar-"+g).hide(),e("#win-calendar-year-"+g).show().html(r),e("#change-year-top-"+g)[0].onclick=function(){return i(c)},e("#change-year-down-"+g)[0].onclick=function(){return i(t-12)},e("#boton-back-calendar-"+g)[0].onclick=function(){return n()}},n=function(){return e("#win-calendar-year-"+g).hide().html(""),e("#win-calendar-"+g).show()},c=function(e){return e.parentNode.removeChild(e)},p=function(t){var n,i,r,a,l,d;for(d=e("#win-calendar-"+g)[0],l=d.getElementsByTagName("a"),a=[],i=0,r=l.length;r>i;i++)n=l[i],a.push(n.onclick=function(){return x=this.innerHTML,t.value=o(x,A,T),c(e("#date_"+g)[0])});return a},o=function(e,t,n){var i,r;return t++,10>t&&(t="0"+t),10>e&&(e="0"+e),i=[],i.y=n,i.m=t,i.d=e,r=i[y[0]]+E+i[y[1]]+E+i[y[2]]},s=function(e){return w[e]},l=function(e){return h[e]},d=function(e,t){return 32-new Date(e,t,32).getDate()},u=function(e,t){var n;return n=new Date(e,t,0).getDay()},f=function(e,t){var n;return console.log(e),n=a(e),console.log(n),t.getAttribute("style","position:absolute; z-index:8000;")},a=function(e){var t,n;if(t=n=0,e.offsetParent)for(t=e.offsetLeft,n=e.offsetTop;e=e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop;return[t,n]}}}(Win),function(e){var t,n,i,r,a,o,l,d,u,s,c,f,p,v,h,m,y,g,_,w,b,x;return t=0,i={},n=!1,e.Window=function(n){var i,a,o,l,d,c,f,p,h,y,g,_,w,b,x,A,T,E,C,L,I,k,B,W;return I=n.width||300,g=n.height||300,b=n.id||"",E=n.title||"",C=n.titleStyle||"",A=n.modal||"",i=n.autoDestroy||"",a=n.autoLoad||"",w=n.html||"",y=n.drag||"",T=n.theme||"",f=n.bodyStyle||"",c=n.bodyColor||"#FFF",d=e("body")[0],B=this,p="undefined"!=typeof n.type&&""!==n.type?"alert":"",W=document.createElement("div"),o=n.bgBody?"background-color:"+n.bgBody+";":"",l=n.bgTitle?"background-color:"+n.bgTitle+";":"",h=n.closable!==!1?'<div class="win-title-btn" id="btn_close_ventana_'+b+'" onclick="'+b+'.close()"></div>':"",isNaN(I)?"auto"===I&&(I="calc(100% - 20px)"):I+="px",isNaN(g)?"auto"===g&&(g="calc(100% - 20px)"):g+="px",""===b&&t++,W.innerHTML+='<div id="win-modal-'+b+'" class="win-modal"> <div id="'+b+'" style="width:'+I+"; height:"+g+"; "+o+" "+f+'" class="win-marco"> <div class="win-file-resize" data-resize="top" id="win-resize-top-'+b+'"></div> <div class="win-file-resize" data-resize="bottom" id="win-resize-bottom-'+b+'"></div> <div class="win-file-resize" data-resize="left" id="win-resize-left-'+b+'"></div> <div class="win-file-resize" data-resize="right" id="win-resize-right-'+b+'"></div> <div class="win-modal-parent" id="win-modal-window_'+b+'"> <div class="win-modal-content"> <div class="win-loader-default" id="win-loader-'+b+'"></div> <div class="win-modal-label" id="label-load-'+b+'"></div> </div> </div> <header id="win-header-'+b+'"> <div class="win-title" id="win-title-'+b+'" style="'+l+" "+C+'"> <div class="win-title-txt">'+E+"</div> "+h+' </div> </header> <section id="win-section-'+b+'" style="height:calc(100% - 27px);" data-role="win-section"></section> </div> </div>',d.appendChild(W),k=document.getElementById(b).offsetWidth,_=document.getElementById(b).offsetHeight,x=d.offsetWidth<k/2?0:(d.offsetWidth-k)/2,L=d.offsetHeight<_/2?0:(d.offsetHeight-_)/2,e("#"+b).css("left",x+"px").css("top",L+"px"),e("#win-title-"+b)[0].onmousedown=function(){return u(b,document.getElementById("win-modal-"+b),event)},e("#win-title-"+b)[0].onmouseup=function(){return s(document.getElementById("win-modal-"+b))},n.resize&&(v(e("#win-resize-top-"+b)[0]),v(e("#win-resize-bottom-"+b)[0]),v(e("#win-resize-left-"+b)[0]),v(e("#win-resize-right-"+b)[0])),n.items&&m(n.items,"win-section-"+b),n.autoLoad&&r(n,"win-section-"+b),{close:function(){return e("#win-modal-"+b)[0].parentNode.removeChild(e("#win-modal-"+b)[0])}}},e.Add=function(e){var t,n,i;return i=document.getElementById(e.idApply).getAttribute("data-role"),"win-tbar"===i&&(t=document.getElementById(e.idApply).lastChild,null!==t&&(n=t.getAttribute("data-rol"),"div-empty"===n&&t.parentNode.removeChild(t))),e.items&&m(e.items,e.idApply),e.autoLoad?r(e,e.idApply):void 0},e.Tbar=function(e){var t;return t=document.getElementById(""+e.idApply),t.className="win-tbar",t.setAttribute("data-rol","win-tbar"),m(e.items,e.idApply)},e.Element=function(t){return this.hidden=function(){return e("#"+t).style("display","none"),c(t),i[t].hidden=!0},this.show=function(){return e("#"+t).style("display","block"),c(t),i[t].hidden=!1},this.enable=function(){return document.getElementById(t).setAttribute("data-state","enable"),i[t].state="enable"},this.disable=function(){return document.getElementById(t).setAttribute("data-state","disable"),i[t].state="disable"},this},e.BlockBtn=function(t){return"disable"!==i[t].state?(e.Element(t).disable(),setTimeout(function(){return document.getElementById(t)?e.Element(t).enable():void 0},2e3)):void 0},e.loading=function(t){var n,i,r,a,o,l,d,u,s;return"undefined"==typeof t.id_ventana||"undefined"==typeof t.estado?void console.warn("Funcion: Loading (Mostrar ventana modal)\nFaltan parametros en el objeto\nParametro Obligatorios: id_ventana ,estado"):e("#win-body-"+t.id_ventana)[0]?(d=e("#win-modal-window_"+t.id_ventana)[0],u=t.text||"Load...",l=t.loader||"default","on"===t.estado?(e("#win-modal-window_"+t.id_ventana)[0].innerHTML='<div class="win-modal-content"> <div class="win-loader-default" id="win-loader-'+t.id_ventana+'"></div> <div class="win-modal-label" id="label-load-'+t.id_ventana+'"></div> </div>',d.style.visibility="visible",e("#win-loader-"+t.id_ventana)[0].setAttribute("class","win-loader-"+l),e("#label-load-"+t.id_ventana)[0].innerHTML=u):"off"===t.estado?(o={sucess:"",fail:"",warm:""},t?(a=o[t.icono]||o.sucess,r=t.evento_icono||"",s=t.texto||"Informacion Almacenada",n=t.duracion||"2000",i=t.estilo_texto||"padding-top: 10px;font-size: 12px;color:#FFF;"):(a=o.sucess,r="",s="Informacion Almacenada",n="2000",i="padding-top:10px; font-size:12px; color:#FFF;"),"infinito"===n?e("#win-modal-window_"+t.id_ventana)[0].innerHTML='<div class="win-modal-content"><div class="win-modal-img-finish"> <img src="'+a+'" onclick="'+r+'"><br> <div class="win-modal-label label-finish">'+s+"</div> </div>":(e("#win-modal-window_"+t.id_ventana)[0].innerHTML='<div class="win-modal-content"><div class="win-modal-img-finish"> <img src="'+a+'" onclick="'+r+'"><br> <div class="win-modal-label label-finish">'+s+"</div> </div>",setTimeout(function(){return d.style.visibility="hidden"},n))):void 0):void console.warn("Funcion: Loading (Mostrar ventana modal)\nEl id de la ventana es incorrecto no se encuentra la ventana "+id_ventana)},e.Alert=function(t){var n,i,r,a;return a=250,n=120,r=t.title||"Alert",i=t.text||"",i+='<div class="content-btn"> <input type="button" value="Aceptar" onclick="$W(\'#Win_ventana_alert\')[0].parentNode.parentNode.removeChild($W(\'#Win_ventana_alert\')[0].parentNode)"> </div>',new e.Window({width:a,height:n,id:"Win_ventana_alert",title:r,html:i,type:"alert",modal:!0,autoScroll:!0,closable:!1,autoDestroy:!0,drag:!1,resize:!1})},e.Confirm=function(t){var n,i,r,a;return a=250,n=120,r=t.title||"Confirm",i=t.text||"",i+='<div class="content-btn"> <input type="button" value="Aceptar" onclick="$W(\'#Win_ventana_confirm\')[0].parentNode.parentNode.removeChild($W(\'#Win_ventana_confirm\')[0].parentNode); '+t.functionOK+';"> <input type="button" value="Cancelar" onclick="$W(\'#Win_ventana_confirm\')[0].parentNode.parentNode.removeChild($W(\'#Win_ventana_confirm\')[0].parentNode); return false;"> </div>',new e.Window({width:a,height:n,id:"Win_ventana_confirm",title:r,html:i,type:"alert",modal:!0,autoScroll:!0,closable:!1,autoDestroy:!0,drag:!1,resize:!1})},e.CtxMenu=function(t){return document.getElementById(t.idApply).oncontextmenu=function(n){return t.objApply=n.srcElement,t.clientX=event.clientX,t.clientY=event.clientY,e.Menu(t),!1}},e.Menu=function(e){var t,i,r,a,o;if(r="",l(),n=!0,e.items){o=e.items;for(a in o)hasProp.call(o,a)&&(t=o[a],r+='<div data-option="top-'+a+'"> <div>'+t.text+"</div> </div>")}return i=e.objApply?e.objApply:document.getElementById(e.idElement),i.innerHTML+='<div class="win-menu" data-role="win-menu" style="top:'+event.clientY+"px; left:"+event.clientX+'px;">'+r+"</div>",e.items?setTimeout(function(){var n,i;n=e.items,i=[];for(a in n)hasProp.call(n,a)&&(t=n[a],i.push(f(e.idApply,a,t.handler)));return i}):void 0},f=function(e,t,n){return document.getElementById(e).querySelector("[data-option=top-"+t+"]").onclick=function(){return l(),n(this)}},l=function(){var e;return n===!0&&(e=document.querySelectorAll("[data-role=win-menu]"),[].forEach.call(e,function(e){return e.parentNode.removeChild(e)})),n=!1},m=function(e,t){var n;return"object"==typeof e&&(n="left",e.forEach(function(e,i,r){switch(e.xtype){case"button":return a(e,t);case"buttongroup":return o(e,t);case"tbar":return x(e,t);case"panel":return p(e,t);case"tabPanel":return w(e,t);case"tab":return _(e,t);case"tbtext":return b(e,t);default:if("-"===e)return y(t);if("--"===e)return g(t);if("->"===e)return n="right",document.getElementById(t).innerHTML+='<div data-rol="div-empty"></div>'}}),"left"===n)?document.getElementById(t).innerHTML+='<div data-rol="div-empty"></div>':void 0},w=function(e,n){var i,r,a,o,l,d;return l=e.style||"",r=e.height||"30",isNaN(d)||(d+="px"),isNaN(r)||(r+="px"),i="calc:(100% - "+r+")",e.id?o=e.id:(t++,o=t),a='<div id="win-tabpanel-'+o+'" class="win-tabpanel" style="width:100%; height:100%; '+l+'" data-role="win-tabpanel"> <div id="win-tabpanel-head-'+o+'" class="win-tabpanel-head" style="width:100%; height:'+r+"; "+l+'"></div> <div id="win-tabpanel-body-'+o+'" class="win-tabpanel-body" style="height:'+i+';"></div> </div>',document.getElementById(n).innerHTML+=a,e.items?m(e.items,"win-tabpanel-head-"+o):void 0},_=function(e,n){var i,r,a,o;return o=e.title||"",r=e.icon||"",e.id?a=e.id:(t++,a="win-tab-"+t),i=document.createElement("div"),i.id=a,document.getElementById(n).appendChild(i),document.querySelectorAll("#"+a).__proto__.estate="enable",setTimeout(function(){return console.log(document.querySelectorAll("#"+a).estate)})},p=function(n,i){var r,a,o,l,d,u;return u=n.width||"160",r=n.height||"60",a=n.html||"",l=n.style||"",d=n.title||"",n.id?o=n.id:(t++,o=t),""!==d&&(r-=20,d='<div id="win-panel-title-'+o+'" style="width:'+u+"; height:20px; "+l+'" class="win-panel-title">'+d+"</div>"),isNaN(u)||(u+="px"),isNaN(r)||(r+="px"),a='<div id="win-panel-'+o+'" class="win-panel" style="width:'+u+"; height:"+r+"; "+l+'" data-role="win-panel"> '+d+' <div id="win-panel-load-'+o+'" class="win-panel-load" style="width:'+u+"; height:"+r+"; "+l+'"> '+a+" </div> </div>",document.getElementById(i).innerHTML+=a,n.autoLoad?setTimeout(function(){return n.autoLoad.idApply="win-panel-load-"+o,e.Load(n.autoLoad)}):n.items?m(n.items,"win-panel-load-"+o):void 0},x=function(e,n){var i;return e.id?i=e.id:(t++,i="win-tbar-"+t),document.getElementById(n).innerHTML+='<div id="'+i+'" class="win-tbar" data-role="win-tbar"></div>',e.items?m(e.items,""+i):void 0},o=function(e,n){var r,a,o,l,d,u,s,c,f;if(r=e.hidden||"",f=e.width||0,s=e.style||"",c=e.title||"",0===f&&e.items)for(u=e.items,l=0,d=u.length;d>l;l++)o=u[l],o.hidden||(f+=o.width>0?o.width||60:void 0);return isNaN(f)||(f+="px"),r===!0&&(r="display:none;"),e.id?a=e.id:(t++,a=t),i[a]={state:"enable",
hidden:r},""!==c&&(c='<div id="win-buttongroup-title-'+a+'" style="height:20px;" class="win-buttongroup-title">'+c+"</div>"),document.getElementById(n).innerHTML+='<div id="'+a+'" class="win-buttongroup" style="width:'+f+"; "+r+" "+s+'" data-role="win-buttongroup"> '+c+' <div id="win-buttongroup-body-'+a+'" class="win-buttongroup-body" style="'+s+'"></div> </div>',e.items?m(e.items,"win-buttongroup-body-"+a):void 0},a=function(e,n){var r,a,o,l,d;return l=e.text||"",r=e.cls||"",d=e.width||50,a=e.hidden||!1,e.id?o=e.id:(t++,o="win-btn-"+t),i[o]={state:"enable",hidden:a},isNaN(d)||(d+="px"),document.getElementById(n).innerHTML+='<div id="'+o+'" class="win-btn" style="width:'+d+';" data-role="win-btn"> <button class="'+r+'">'+l+"</button> </div>",e.handler?setTimeout(function(){return document.querySelector("#"+n+" > #"+o).onclick=function(){return"disable"!==i[o].state?e.handler(this):void 0}}):void 0},b=function(e,n){var i,r,a,o;return a=e.text||"",o=e.width||"120",r=e.style||"left",e.id?i=e.id:(t++,i="win-tbtext-"+t),document.getElementById(n).innerHTML+='<div id="'+i+'" class="win-tbtext" style="width:'+o+"; "+r+'" data-role="win-tbtext">'+a+"</div>"},y=function(e){return document.getElementById(e).innerHTML+='<div class="win-separator" data-role="win-separator">|</div>'},g=function(e){return document.getElementById(e).innerHTML+='<div class="win-separatorHeight" data-role="win-separatorHeight"></div>'},r=function(n,i){var r,a,o,l,d,u,s,c;return u=n.items||"",l=n.html||"",a=n.clsBody||"",c="overflow:hidden;",n.scrollY===!0?c+="overflow-y:auto;":n.scrollX===!0&&(c+="overflow-x:auto;"),n.scroll===!0&&(c="overflow:auto;"),n.idApply?d=n.idApply:(t++,d="win-body-"+t),s=document.getElementById(i),o=s.offsetHeight,s.innerHTML+='<div id="'+d+'" class="win-body '+a+'" style="'+c+'" data-role="win-body">'+l+"</div>",r=i,setTimeout(function(){return n.autoLoad.idApply=d,e.Load(n.autoLoad)})},c=function(e){var t,n,i,r,a,o,l,d;if(document.getElementById(e))return a=document.getElementById(e).getAttribute("data-role"),(a="win-btn")&&(n=document.getElementById(e).parentNode,i=document.getElementById(e).parentNode.parentNode,r=document.getElementById(e).parentNode.parentNode.parentNode,t="",o=n.getAttribute("data-role"),l=i.getAttribute("data-role"),d=r.getAttribute("data-role"),"win-body"===o||"win-section"===o?t=n:"win-body"===l||"win-section"===l?t=i:("win-body"===d||"win-section"===d)&&(t=r),""!==t)?h(t.id):void 0},h=function(e){var t,n,i,r;return t=0,i="",n=document.querySelectorAll("#"+e+" > div"),[].forEach.call(n,function(e){var n;return n=e.getAttribute("data-role"),""===i?"win-body"===n?void(i=e):t+=e.offsetHeight:void 0}),r=0===t?"100%":"calc(100% - "+t+"px)",""!==i?setTimeout(function(){return i.style.height=r}):void 0},u=function(e,t,n){var i,r,a,o,l,u,s,c,f,p,v;return s=document.getElementById(e),n=n||window.event,p=n.clientX,v=n.clientY,u=s.style.top.replace("px",""),l=s.style.left.replace("px",""),f=parseInt(s.offsetWidth),c=parseInt(s.offsetHeight),r=parseInt(t.offsetWidth),i=parseInt(t.offsetHeight),t.style.cursor="move",a=p-l,o=v-u,document.onmousemove=function(e){var t,n;return e=e||window.event,p=e.clientX,v=e.clientY,t=p-a,n=v-o,0>t&&(t=0),0>n&&(n=0),t+f>r&&(t=r-f),n+c>i&&(n=i-c),d(s,t,n)}},d=function(e,t,n){return e.style.left=t+"px",e.style.top=n+"px"},s=function(e){return e.style.cursor="default",document.onmousemove=function(e){return e.preventDefault}},v=function(e){var t,n,i,r,a,o,l,d,u,s,c,f,p,v,h;return v=0,h=0,p=0,f=0,c=1*e.parentNode.style.top.replace("px",""),s=1*e.parentNode.style.left.replace("px",""),u=e.parentNode,d=e.getAttribute("data-resize"),e.onmousedown=function(e){return n(e)},n=function(e){return v=e.clientX,h=e.clientY,p=parseInt(document.defaultView.getComputedStyle(u).width,10),f=parseInt(document.defaultView.getComputedStyle(u).height,10),document.documentElement.addEventListener("mousemove",t,!1),document.documentElement.addEventListener("mouseup",l,!1)},t=function(e){return"left"===d?i(e):"right"===d?r(e):"top"===d?o(e):"bottom"===d?a(e):void 0},l=function(e){return document.documentElement.removeEventListener("mousemove",t,!1),document.documentElement.removeEventListener("mouseup",l,!1)},i=function(e){return u.style.left=s+e.clientX-v+"px",u.style.width=p-e.clientX+v+"px"},o=function(e){return u.style.top=c+e.clientY-h+"px",u.style.height=f-e.clientY+h+"px"},r=function(e){return e.clientX>=500?u.style.width=p+e.clientX-v+"px":void 0},a=function(e){return e.clientY>=340?u.style.height=f+e.clientY-h+"px":void 0}}}(Win),function(e){var t;return e.Ajax=function(e){var t,n,i,r,a;if(i="","undefined"!=typeof e.params)for(r in e.params)i+=""===i?r+"="+e.params[r]:"&"+r+"="+e.params[r];return a=new XMLHttpRequest,t=e.url,n=e.method||"POST",a.open(n,t,!0),"POST"===n&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded",!0),a.onreadystatechange=function(){var t;return 4===a.readyState?(t=a,e.success(t,a)):e.failure?e.failure(a):void 0},a.send(i)},e.Load=function(e){var n,i,r,a,o,l;if(!e.idApply)return void alert("idApply Obligatorio");if("null"==typeof document.getElementById(e.idApply))return void alert("No se encontro elemento en el arbol Dom");if(r="","undefined"!=typeof e.params)for(o in e.params)r+=""===r?o+"="+e.params[o]:"&"+o+"="+e.params[o];return a=e.text||"cargando...",document.getElementById(e.idApply).innerHTML='<div class="win-content-min-load" > <div class="win-content-min-load-img"> <div class="win-min-load-ajax"></div> </div> <div class="win-content-min-load-label">'+a+"</div> </div>",l=new XMLHttpRequest,n=e.url+"?",i=e.method||"POST",l.open(i,n,!0),"POST"===i&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded",!0),l.onreadystatechange=function(){var n;return 4===l.readyState?(n=document.getElementById(e.idApply),404===l.status?n.innerHTML="Not found":(n.innerHTML=l.responseText,t(n))):void 0},l.send(r)},t=function(e){var t,n,i,r,a,o;for(o=e.getElementsByTagName("script"),r=[],n=0,i=o.length;i>n;n++)t=o[n],a=document.createElement("script"),t.parentNode.replaceChild(a,t),r.push(a.innerHTML=t.innerHTML);return r}}(Win),function($W){var PATH_GRILLA,_createAside,_createCol,_createContent,_createPagination,_createRow,_createTbar,_createTitle,_createToolbar;return $W.Grilla={},PATH_GRILLA={},$W.Grilla.ini=function(e){var t,n,i,r,a,o,l,d,u,s,c,f,p,v,h,m,y,g,_,w,b,x,A,T,E;return _=e.tbar||"",v=e.name||"",g="",A=e.url||"",c=e.idApply||"",h=e.opcionClass||"",f=e.items||{},b=e.titleItems||{},E="100%",y=c,w=e.tbarHeight||"",x=e.toolbar||!1,T=e.valueToolbar||"",o=e.filterAside||"",m=e.pagina||"",p=e.maxPage||"",i=e.fBtnNuevo||"Nuevo",r=e.fTitle||"",n=e.fAncho||"auto",t=e.fAlto||"auto",a=e.fUpdate||"",PATH_GRILLA[v]=A,_===!0&&""===h?(_createTbar(v,A,c,n,t,r,i),w="height:calc(100% - "+w+"px)"):w="height:100%",x!==!1&&(g='style="height:calc(100% - 28px);"',s=_createToolbar(v,A)),l=_createAside(v,o),d=_createContent(v,A,h,m,p,g,b,f,a,n,t),""!==l&&(E="calc(100% - 205px)"),""===h?u='<div id="grilla_ventana_'+v+'" class="grilla_ventana" style="'+w+';"> '+l+' <div id="grilla_'+v+'" class="grilla_load" style="width:'+E+';"> '+s+" "+d+" </div> </div>":(y="grilla_"+v,u=""+s+d),document.getElementById(y).innerHTML+=u,$W("#grilla_toolbar_reload_"+v).on("click",function(){return $W.Grilla.buscar(v,A)}),$W("#grilla_content_page_"+v+" .grilla_page").on("click",function(){return $W.Grilla.pagination(this,v,T,m,p,A)}),"filterField"===h?(document.getElementById("field_buscar_"+v).value=T,document.getElementById("field_buscar_"+v).focus()):void 0},$W.Grilla.fOpen=function(name,url,id,width,height,title,autoScroll){var opcionClass,params,state;if(!(id>0&&(state=document.getElementById("grilla_fila_"+name+"_"+id).getAttribute("data-state"),"fDelete"===state)))return opcionClass=id>0?"vUpdate":"vIinsert",params={},params.indexClass=id,params.opcionClass=opcionClass,eval("window.Win_grilla_form_"+name+' = $W.Window({ id       : "Win_grilla_form_'+name+'", width    : width, height   : height, title    : title, modal    : true, closable : true, drag     : true, resize   : true, scroll   : false, autoLoad : { url    : url, params : params } })')},$W.Grilla.fSave=function(name,url,indexClass){var arrayInput,contRequired,i,jsonForm,k,len,msjRequired,objForm,opcionClass;for(objForm={},arrayInput=[],msjRequired="",contRequired=0,opcionClass=indexClass>0?"fUpdate":"fInsert",arrayInput[0]=document.querySelectorAll("#form_"+name+" input"),arrayInput[1]=document.querySelectorAll("#form_"+name+" select"),arrayInput[2]=document.querySelectorAll("#form_"+name+" textarea"),k=0,len=arrayInput.length;len>k;k++)i=arrayInput[k],[].forEach.call(i,function(e){var t,n,i,r,a;return n=e.id,a=e.value,i=e.getAttribute("data-label"),r=e.getAttribute("data-required"),""===a&&"true"===r&&(contRequired++,msjRequired+="\n* "+i),t=n.replace("form_"+name+"_",""),objForm[t]=a});return jsonForm=JSON.stringify(objForm),1===contRequired?void alert("El siguiente campo es obligatorio"+msjRequired):contRequired>1?void alert("Los siguientes campos son obligatorios"+msjRequired):$W.Ajax({url:url,params:{indexClass:indexClass,opcionClass:opcionClass,jsonFormValue:jsonForm},success:function(result,xhr){var body,contDiv,fAlto,fAncho,fUpdate,items,json;return json=JSON.parse(result.responseText),"true"===json.estado?(items=json.items||{},fUpdate=json.fUpdate||"",fAncho=json.fAncho||"",fAlto=json.fAlto||"","fInsert"===opcionClass?(body=document.getElementById("gilla_body_"+name),body.lastChild&&(contDiv=body.lastChild.getAttribute("data-cont"),contDiv++),body.innerHTML+=_createRow(name,url,opcionClass,items,fUpdate,fAncho,fAlto),contDiv>0&&(body.getAttribute("data-cont",contDiv),document.getElementById("grilla_fila_cont_"+name+"_"+json.indexClass).innerHTML=contDiv)):"fUpdate"===opcionClass&&(contDiv=document.getElementById("grilla_fila_cont_"+name+"_"+json.indexClass).innerHTML,document.getElementById("grilla_content_fila_"+name+"_"+json.indexClass).innerHTML=_createRow(name,url,opcionClass,items,fUpdate,fAncho,fAlto),document.getElementById("grilla_fila_cont_"+name+"_"+json.indexClass).innerHTML=contDiv),eval("Win_grilla_form_"+name+".close();")):console.log("false")},failure:function(e){return console.log("fail")}})},$W.Grilla.fDelete=function(name,url,indexClass){return $W.Ajax({url:url,params:{indexClass:indexClass,opcionClass:"fDelete"},success:function(result,xhr){var arrayDivHtml,json;return json=JSON.parse(result.responseText),"true"===json.estado?(document.getElementById("grilla_fila_"+name+"_"+indexClass).setAttribute("data-state","fDelete"),document.getElementById("grilla_fila_image_"+name+"_"+indexClass).setAttribute("data-icon","fDelete"),arrayDivHtml=document.querySelectorAll("#grilla_fila_"+name+"_"+indexClass+" [data-type=html]"),[].forEach.call(arrayDivHtml,function(e){return e.innerHTML=""}),eval("Win_grilla_form_"+name+".close();")):console.log("false")},failure:function(e){return console.log("fail")}})},$W.Grilla.inputBuscar=function(e,t,n){var i;return i=document.all?e.keyCode:e.which,13===i&&$W.Grilla.buscar(t,n),!0},$W.Grilla.buscar=function(e,t){var n;return n=document.getElementById("field_buscar_"+e).value,$W.Load({idApply:"grilla_"+e,url:t,params:{opcionClass:"filterField",valueToolbar:n}})},$W.Grilla.eventAside=function(e,t){var n,i,r;return r=e.getAttribute("data-state"),i=document.getElementById("grilla_"+t),n=document.getElementById("grilla_aside_"+t),"open"===r?(n.style.width="16px",i.style.width="calc(100% - 21px)",e.setAttribute("data-state","close")):(n.style.width="200px",i.style.width="calc(100% - 205px)",e.setAttribute("data-state","open"))},$W.Grilla.pagination=function(e,t,n,i,r,a){var o,l,d;return l=0,r=1*r,i=1*i,o=e.getAttribute("data-type"),d=document.getElementById("grilla_content_"+t).parentNode,"next"===o&&i===r||"prev"===o&&1===i||"last"===o&&i===r||"first"===o&&1===i?void 0:("next"===o?l=i+1:"prev"===o?l=i-1:"last"===o?l=r:"first"===o&&(l=1),$W.Load({idApply:d.id,url:a,params:{pagina:l,opcionClass:"paginacion",valueToolbar:n}}))},$W.Grilla.updateRow=function(e,t){var n,i,r;return i="updateRow",r=PATH_GRILLA[e],n=document.getElementById("grilla_fila_cont_"+e+"_"+t).innerHTML,$W.Ajax({url:r,params:{indexClass:t,opcionClass:i},success:function(a,o){var l;return l=JSON.parse(a.responseText),document.getElementById("grilla_content_fila_"+e+"_"+t).innerHTML=_createRow(e,r,i,l.items,l.fUpdate,l.fAncho,l.fAlto),document.getElementById("grilla_fila_cont_"+e+"_"+t).innerHTML=n,document.getElementById("grilla_fila_image_"+e+"_"+t).setAttribute("data-icon","fUpdate")},failure:function(e){return console.log("fail")}})},_createAside=function(e,t){var n,i,r;n="";for(i in t)hasProp.call(t,i)&&(r=t[i],n+='<div class="grilla-aside-title">'+r.title+"</div>");return""!==n&&(n='<aside id="grilla_aside_'+e+'" style="width:200px;"> <div class="grilla-aside-head" data-state="open" onclick="$W.Grilla.eventAside(this, \''+e+"')\">TITLE OR ICON</div> "+n+" </aside>"),n},_createToolbar=function(e,t){return'<div id="grilla_toolbar_'+e+'" class="grilla_toolbar"> <div> <div style="margin:2px 0 0 5px;"> <input class="myfieldBusqueda" type="text" id="field_buscar_'+e+'" style="width:209px" onKeyUp="$W.Grilla.inputBuscar(event,\''+e+"','"+t+'\')"/> </div> <div id="grilla_toolbar_reload_'+e+'" class="grilla_toolbar_reload"></div> </div> </div>'},_createContent=function(e,t,n,i,r,a,o,l,d,u,s){var c,f,p;return c=_createRow(e,t,n,l,d,u,s),p=_createTitle(e,o),f=_createPagination(e,i,r),'<div id="grilla_content_'+e+'" class="grilla_content" '+a+'> <div id="grilla_title_'+e+'" class="grilla_title">'+p+'</div> <div id="gilla_body_'+e+'" class="grilla_body">'+c+'</div> <div class="grilla_footer">'+f+"</div> </div>"},_createTitle=function(e,t){var n,i,r;n='<div class="grilla_title_label" style="width:34px;">No.</div>';for(i in t)hasProp.call(t,i)&&(r=t[i],n+='<div class="grilla_title_label" style="width:'+r.width+'px;">'+r.title+"</div>");return n},_createRow=function(e,t,n,i,r,a,o){var l,d,u,s,c,f,p;s="",d=0;for(f in i)hasProp.call(i,f)&&(l=i[f],d++,c=_createCol(e,f,l),u="",u=r===!0?"$W.Grilla.fOpen('"+e+"', '"+t+"', '"+f+"', '"+a+"', '"+o+"')":""===r?"":r+("('"+f+"')"),p='<div id="grilla_fila_'+e+"_"+f+'" class="grilla_fila" ondblclick="'+u+'" data-state="'+n+'"> <div id="MuestraToltip_'+e+"_"+f+'" class="grilla_col_first"> <div id="grilla_fila_cont_'+e+"_"+f+'" class="grilla_fila_cont">'+d+'</div> <div id="grilla_fila_image_'+e+"_"+f+'" class="grilla_fila_image" data-icon="'+n+'"></div> </div> '+c+" </div>",s+="fUpdate"!==n&&"updateRow"!==n?'<div id="grilla_content_fila_'+e+"_"+f+'" class="grilla_content_fila" data-id="'+f+'" data-cont="'+d+'" style="float:left; width:100%">'+p+"</div>":p);return s},_createCol=function(e,t,n){var i,r,a;i="";for(r in n)hasProp.call(n,r)&&(a=n[r],i+='<div id="div_'+e+"_"+r+"_"+t+'" class="grilla_celdas" style="float:left; width:'+a.width+"px; "+a.style+'" data-type="'+a.type+'">'+a.html+"</div>");return i},_createTbar=function(e,t,n,i,r,a,o){return document.getElementById(n).innerHTML+='<div id="grilla_tbar_'+e+'" style="margin:0; padding:0;"></div>',$W.Tbar({idApply:"grilla_tbar_"+e,items:[{xtype:"button",id:"btn_"+e+"_new",cls:"user_black_36",text:o,handler:function(){return $W.Grilla.fOpen(e,t,"",i,r,a)}}]})},_createPagination=function(e,t,n){var i;return i="",n>1&&(i='<div id="grilla_content_page_'+e+'" class="grilla_content_page"> <div>Pagina '+t+" de "+n+'</div> <div data-type="first" class="grilla_page"></div> <div data-type="prev" class="grilla_page"></div> <div data-type="next" class="grilla_page"></div> <div data-type="last" class="grilla_page"></div> </div>'),i}}(Win)}).call(this);