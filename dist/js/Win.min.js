/**
 * win - Libreria para web aplicaciones RIA
 * @version v0.0.1
 * @link    https://github.com/jhon3rick/Win.js#readme
 * @author  Jhon Marroquin (Twitter @jhon3rick || email jhon3rick@gmail.com)
 * @license (MIT)
 */
(function(){var m;this.Win=this.$W=m=function(){var a,c,e,g;c=/^\.([\w-]+)$/;e=/^#[\w\d-]+$/;g=/^[\w-]+$/;document.createElement("table");document.createElement("tr");document.createElement("tbody");document.createElement("div");a=function(a){c.test(a)?a=document.getElementsByClassName(a.replace(".","")):g.test(a)?a=document.getElementsByTagName(a):e.test(a)?(a=document.getElementById(a.replace("#","")))||(a=[]):a=document.querySelectorAll(a);return a};a.Window=function(b){var k,c,f,n,g,e,l,m,p,h,
q,r,t,u;t=b.width||300;m=b.height||300;h=b.id||"";q=b.title||"";r=b.titleStyle||"";p=b.html||"";l="undefined"!==typeof b.resize?b.resize:!0;n=b.bodyStyle||"";f=a("body")[0];u=document.createElement("div");g="undefined"!==typeof b.type&&""!==b.type?"alert":"";k=b.bgBody?"background-color:"+b.bgBody+";":"";c=b.bgTitle?"background-color:"+b.bgTitle+";":"";e=!0===l||""===l?'<div class="win-title-btn" id="btn_close_ventana_'+h+'" onclick="'+h+'.close()"></div>':"";l=!0===l||""===l?'<div class="win-div-resize" id="win_div_resize_'+
h+'"></div>':"";u.setAttribute("id","win_modal_"+h);u.setAttribute("class","win-modal");u.innerHTML='<div style="width:'+t+"; height:"+m+"; top:"+(f.offsetHeight<m?0:(f.offsetHeight-m)/2)+"; left:"+(f.offsetWidth<t?0:(f.offsetWidth-t)/2)+"; "+k+" "+n+'" id="'+h+'" class="win-marco">\n\t<div class="win-modal-parent" id="win_modal_window_'+h+'"><div class="win-modal-content"><div class="win-loader-default" id="win_loader_'+h+'"></div><div class="win-modal-label" id="label_cargando_'+h+'"></div></div></div>\n\t<div class="win-title" id="win_title_'+
h+'" style="'+c+" "+r+'">\n\t\t<div class="win-title-txt">'+q+"</div>\n\t\t"+e+"\n\t</div>\n\t"+l+'\n\t<div class="win-tbar" id="win_tbar_'+h+'"></div>\n\t<div class="win-window-body '+g+'" id="win_window_'+h+'">'+p+"</div>\n</div>\n<script onload>alert(1);\x3c/script>";f.appendChild(u);"undefined"!==typeof b.tbar?(b.tbar.id=h,a.tbar(b.tbar)):a("#win_tbar_"+h).parentNode.removeChild(a("#win_tbar_"+h));"undefined"!==typeof b.autoLoad&&a.Ajax.load(a("#win_window_"+h),b.autoLoad);return{close:function(){return document.getElementById(""+
h).parentNode.parentNode.removeChild(document.getElementById(""+h).parentNode)}}};a.tbar=function(b){var k,c;if("object"===typeof b)return k="",c=a("#win_tbar_"+b.id),b.forEach(function(b,n,g){if("button"===b.xtype)return a.button({tbar:c,align:k,json:b});if("buttongroup"===b.xtype)return b.tbar=c,a.buttongroup(b);if("undefined"!==typeof b.items)return b.items.tbar=c,a.items(b.items);if("tbtext"===b.xtype)return a.tbtext({tbar:c,align:k,json:b});if("-"===b)return a.separator({tbar:c,align:k});if("->"===
b)return k="right"})};a.items=function(b){if("object"===typeof b)return b.forEach(function(c,d,f){if("panel"===c.xtype)return c.tbar=b.tbar,a.panel(c)})};a.buttongroup=function(a){};a.button=function(a){var c,d,f,n,g;g=a.json.text||"";n=a.json.id||"";d=a.json.cls||"";f="right"===a.align?"widge-right":"";c=document.createElement("div");c.setAttribute("id",n);c.setAttribute("class","win-btn "+f);c.innerHTML='<button class="'+d+'">'+g+"</button>";c.onclick=a.json.handler;return a.tbar.appendChild(c)};
a.panel=function(b){var c,d,f,n,g;f=b.id||"";g=b.width||"auto";d=b.height||"100%";c=b.bodyStyle||"";n=document.createElement("div");n.setAttribute("id",f);n.setAttribute("class","win-panel ");n.setAttribute("style","width:"+g+";height:"+d+";"+c);b.tbar.appendChild(n);if("undefined"!==typeof b.autoLoad)return a.Ajax.load(n,b.autoLoad);if("undefined"!==typeof b.html)return n.innerHTML=b.html};a.tbtext=function(a){var c,d;d=document.createElement("div");c="right"===a.align?"widge-right":"";d.setAttribute("id",
"win_tbtext_"+a.json.id);d.setAttribute("class","win-tbtext "+c);d.innerHTML="<div>"+a.json.text+"</div>";return a.tbar.appendChild(d)};a.separator=function(a){var c;c=document.createElement("div");c.setAttribute("class","win-separator "+("right"===a.align?"widge-right":""));c.innerHTML="<div>|</div>";return a.tbar.appendChild(c)};a.getButton=function(b){this.hiden=function(b){return a("#id").style.display="none"};this.show=function(b){return a("#id").style.display="block"};return b};a.get=function(b){return{load:function(c){var d;
d=a(b);return a.Ajax.load(d,c)},element:function(){return a(b)}}};a.loading=function(b){var c,d,f,g,e;if("undefined"===typeof b.id_ventana||"undefined"===typeof b.estado)console.warn("Funcion: Loading (Mostrar ventana modal)\nFaltan parametros en el objeto\nParametro Obligatorios: id_ventana ,estado");else if(a("#win_window_"+b.id_ventana)){g=a("#win_modal_window_"+b.id_ventana);d=b.text||"Cargando...";c=b.loader||"default";if("on"===b.estado)return a("#win_modal_window_"+b.id_ventana).innerHTML=
'<div class="win-modal-content"><div class="win-loader-default" id="win_loader_'+b.id_ventana+'"></div><div class="win-modal-label" id="label_cargando_'+b.id_ventana+'"></div></div>',g.style.visibility="visible",a("#win_loader_"+b.id_ventana).setAttribute("class","win-loader-"+c),a("#label_cargando_"+b.id_ventana).innerHTML=d;if("off"===b.estado){c={sucess:"",fail:"",warm:""};b?(f=c[b.icono]||c.sucess,d=b.evento_icono||"",e=b.texto||"Informacion Almacenada",c=b.duracion||"2000"):(f=c.sucess,d="",
e="Informacion Almacenada",c="2000");if("infinito"===c)return a("#win_modal_window_"+b.id_ventana).innerHTML="<div class='win-modal-content'><div class='win-modal-img-finish'><img src='"+f+"' onclick='"+d+"'; ><br><div class='win-modal-label label-finish' >"+e+"</div></div></div>";a("#win_modal_window_"+b.id_ventana).innerHTML="<div class='win-modal-content'><div class='win-modal-img-finish'><img src='"+f+"' onclick='"+d+"'; ><br><div class='win-modal-label label-finish' >"+e+"</div></div></div>";
return setTimeout(function(){return g.style.visibility="hidden"},c)}}else console.warn("Funcion: Loading (Mostrar ventana modal)\nEl id de la ventana es incorrecto no se encuentra la ventana "+id_ventana)};a.Alert=function(b){var c;if("undefined"===typeof b)console.warn("Para utiliza la propiedad alert debe enviar el objeto con los parametros\nConsulte la documentacion");else return c=b.title||"Alert",b=b.text||"",new a.Window({width:250,height:120,id:"Win_ventana_alert",title:c,html:b+'<div class="content-btn"><input type="button" value="Aceptar" onclick="document.getElementById(\'Win_ventana_alert\').parentNode.parentNode.removeChild(document.getElementById(\'Win_ventana_alert\').parentNode)"></div>',
type:"alert",modal:!0,autoScroll:!0,closable:!1,autoDestroy:!0,drag:!1,resize:!1})};a.Confirm=function(b){var c,d;if("undefined"===typeof b)console.warn("Para utiliza la propiedad alert debe enviar el objeto con los parametros\nConsulte la documentacion");else return d=b.title||"Confirm",c=b.text||"",c+='<div class="content-btn"><input type="button" value="Aceptar" onclick="document.getElementById(\'Win_ventana_confirm\').parentNode.parentNode.removeChild(document.getElementById(\'Win_ventana_confirm\').parentNode);'+
b.functionOK+';"> <input type="button" value="Cancelar" onclick="document.getElementById(\'Win_ventana_confirm\').parentNode.parentNode.removeChild(document.getElementById(\'Win_ventana_confirm\').parentNode);return false;"></div>',new a.Window({width:250,height:120,id:"Win_ventana_confirm",title:d,html:c,type:"alert",modal:!0,autoScroll:!0,closable:!1,autoDestroy:!0,drag:!1,resize:!1})};a.version="0.0.1";return a}();$W.form=function(){return{intField:function(a){$W("#"+a.applyTo).className+=" win-input-number";
$W("#"+a.applyTo).onkeypress=function(a){return m.form.validateIntField({event:a,eventType:"keypress",input:this})};return $W("#"+a.applyTo).onchange=function(a){return m.form.validateIntField({event:a,eventType:"change",input:this})}},doubleField:function(a){$W("#"+a.applyTo).className+=" win-input-number";$W("#"+a.applyTo).onkeypress=function(a){return m.form.validateDoubleField({event:a,eventType:"keypress",input:this})};return $W("#"+a.applyTo).onchange=function(a){return m.form.validateDoubleField({event:a,
eventType:"change",input:this})}},textField:function(a){$W("#"+a.applyTo).onkeyup=function(c){return m.form.validateTextField({event:c,eventType:"keyup",input:this,type:a.type})};return $W("#"+a.applyTo).onchange=function(c){return m.form.validateTextField({event:c,eventType:"change",input:this,type:a.type})}},emailField:function(a){return $W("#"+a.applyTo).onchange=function(a){return m.form.validateEmailField({event:a,input:this})}},globalField:function(a){},validateIntField:function(a){var c;c=
document.all?a.event.keyCode:a.event.which;if(8===c||9===c||0===c||13===c)return!0;if("keypress"===a.eventType)return/\d/.test(String.fromCharCode(c));if("change"===a.eventType)return a.input.value=a.input.value.replace(/[^\d.]/g,"")},validateDoubleField:function(a){var c;c=document.all?a.event.keyCode:a.event.which;if(8===c||9===c||0===c||13===c)return!0;if("keypress"===a.eventType)return/[\d.]/.test(String.fromCharCode(c));if("change"===a.eventType&&(a.input.value=a.input.value.replace(/[^\d.]/g,
""),console.log(!!a.input.value.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)),c=!!a.input.value.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/),!c))return c=a.input.value.split("."),a.input.value=c[0]+"."+c[1]},validateTextField:function(a){var c;c=document.all?a.event.keyCode:a.event.which;if(8===c||9===c||0===c||13===c)return!0;if("keyup"===a.eventType){if("uppercase"===a.type)return a.input.value=a.input.value.toUpperCase();if("lowercase"===a.type)return a.input.value=
a.input.value.toLowerCase()}else if("change"===a.eventType)return a.input.value=a.input.value.replace(/[\#\-\"\']/g,"")},validateEmailField:function(a){if(!a.input.value.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i))return a.input.value="",a.input.focus()},dateField:function(a){var c,e,g,b,k,d,f,n,m,w,l,v,p,h,q,r,t,u;r="-";e=a.applyTo;k=a.format||"y-m-d";v=a.listeners.select||"";l=$W("#"+e);c=$W("#calendarDiv");
"undefined"!==typeof a.value&&(l.value=a.value);a=[];r=k.replace(/[a-zA-Z\d\s]/g,"")[0];f=k.replace(/[^a-zA-Z\d\s]/g,"");k=l.value.replace(/[^\d]/g,"");""===l.value?(q=(new Date).getFullYear(),h=(new Date).getMonth(),p=(new Date).getDate()):(a[f[0]]=k[0],a[f[1]]=k[1],a[f[2]]=k[2],q=(new Date(a.y)).getFullYear(),h=(new Date(a.m)).getMonth(),p=(new Date(a.d)).getDate());l.readOnly=!0;l.onfocus=function(){t(this,c);c.style.display="block";g(this);return u(this)};g=function(a){var b,d,f,e,k,l,p,r,t,v;
d='<a id="closeCalendar">Close Calendar</a>\n<table cellpadding="0" cellspacing="0" id="linksTable">\n\t<tr>\n\t\t<td><a id="prevMonth"><</a></td>\n\t\t<td><a id="nextMonth">></a></td>\n\t</tr>\n</table>\n<table id="calendar" cellpadding="0" cellspacing="0"`class="win-calendar">\n\t<tr>\n\t\t<th colspan="7" class="calendarHeader">'+w(h)+" "+q+'</th>\n</tr>\n<tr class="weekDaysTitleRow">';l="DLMMJVS".split("");f=0;for(e=l.length;f<e;f++)b=l[f],d+="<td>"+b+"</td>";b=n(q,h);e=m(q,h);k=0;f=1;7!==e?(k=
Math.ceil((e+1+b)/7),l=e+1):l=0;v=(new Date).getDate();r=(new Date).getMonth();t=(new Date).getFullYear();e=0;for(p=k;0<=p?e<p:e>p;0<=p?++e:--e){d+='<tr class="weekDaysRow">';for(k=0;7>k;++k)d=f===v&&q===t&&h===r&&0===l?d+'<td id="today" class="weekDaysCell">':d+'<td class="weekDaysCell">',0===l&&(f<=b&&(d+="<a>"+f+"</a>"),f++),d+="</td>",0<l&&l--;d+="</tr>"}c.innerHTML=d+"</table>";$W("#closeCalendar").onclick=function(){return c.style.display="none"};$W("#prevMonth").onclick=function(){h--;0>h&&
(h=11,q--);g(a);return u(a)};return $W("#nextMonth").onclick=function(){h++;11<h&&(h=0,q++);g(a);return u(a)}};u=function(a){var b,c,f,e,g;g=$W("#calendar").getElementsByTagName("a");e=[];c=0;for(f=g.length;c<f;c++)b=g[c],e.push(b.onclick=function(){l.selected=v;l.selected();$W("#calendarDiv").style.display="none";p=this.innerHTML;return a.value=d(p,h,q)});return e};d=function(a,b,c){var d;b++;10>b&&(b="0"+b);10>a&&(a="0"+a);d=[];d.y=c;d.m=b;d.d=a;return d[f[0]]+r+d[f[1]]+r+d[f[2]]};w=function(a){return"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" ")[a]};
n=function(a,b){return 32-(new Date(a,b,32)).getDate()};m=function(a,b){return(new Date(a,b,0)).getDay()};t=function(a,c){var d;d=b(a);c.style.position="absolute";c.style.top=d[1]+18+"px";return c.style.left=d[0]+"px"};return b=function(a){var b,c;b=c=0;if(a.offsetParent)for(b=a.offsetLeft,c=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop;return[b,c]}}}}();$W.Ajax=function(){return{request:function(a){var c,e,g,b;c="";if("undefined"===typeof a.id_ventana)console.warn("Debe enviar el parametro id_ventana, para poder mostrar el loading");
else{if("undefined"!==typeof a.params)for(e in a.params)c+=""===c?e+"="+a.params[e]:"&"+e+"="+a.params[e];if(!0===a.modal||""===a.modal)g={id_ventana:a.id_ventana,text:a.text,loader:a.loader,icono:a.iconFinish,icono:a.iconFinish,texto:a.textFinish,duracion:a.duracionFinish,estado:"on"},m.loading(g);b=new XMLHttpRequest;c=a.url+"?"+c;e=a.method||"POST";b.open(e,c,!0);b.onreadystatechange=function(){var c;if(4===b.readyState)return c=b.responseText,!0!==a.modal&&""!==a.modal||!0!==a.autoClose&&""!==
a.autoClose||(g.estado="off",m.loading(g)),a.success(c,b);!0!==a.modal&&""!==a.modal||!0!==a.autoClose&&""!==a.autoClose||(g.estado="off",m.loading(g));return a.failure(b)};return b.send(null)}},load:function(a,c){var e,g,b,k,d;b="";if("undefined"!==typeof c.params)for(k in c.params)b+=""===b?k+"="+c.params[k]:"&"+k+"="+c.params[k];a.innerHTML='<div class="win-content-min-load" ><div class="win-content-min-load-img"><div class="win-min-load-ajax"></div></div><div class="win-content-min-load-label">'+
(c.text||"cargando...")+"</div></div>";d=new XMLHttpRequest;d.open(c.method||"POST",c.url+"?"+b,!0);d.onreadystatechange=function(){var b,c;if(4===d.readyState)return c=d.responseText,b=g(c),a.innerHTML=b,e(c)};d.send(null);g=function(a){return a.replace(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:\x3c/script>)","img"),"")};return e=function(a){var b;a=a.match(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:\x3c/script>)","img"))||[];b="";a.map(function(a){return b+=(a.match(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/im)||
["",""])[1]});return eval(b)}}}}();m.Desktop=function(a){var c,e;e=a.widthIcon||20;c=a.heightIcon||20;this.modulos=function(a){var b;b='<div style="height:100%"> <div class="desk-content-modulos">';a.forEach(function(k,d,f){return b+='<div class="desk-modulo" style="width:'+e+"; height:"+c+';">\n\t<div></div>\n\t<div>'+a.text+"</div>\n</div>"});b+="</div></div>";return document.querySelector("body").innerHTML=b};if("object"===typeof a.modulos)return this.modulos(a.modulos)}}).call(this);