/**
 * win - Libreria para web aplicaciones RIA
 * @version v0.0.1
 * @link    https://github.com/jhon3rick/Win.js#readme
 * @author  Jhon Marroquin (Twitter @jhon3rick || email jhon3rick@gmail.com)
 * @license (MIT)
 */
var Win;
Win.Ajax=function(){return{request:function(a){var b,c,g,d;b="";if("undefined"===typeof a.id_ventana)console.warn("Debe enviar el parametro id_ventana, para poder mostrar el loading");else{if("undefined"!==typeof a.params)for(c in a.params)b+=""===b?c+"="+a.params[c]:"&"+c+"="+a.params[c];if(!0===a.modal||""===a.modal)g={id_ventana:a.id_ventana,text:a.text,loader:a.loader,icono:a.iconFinish,icono:a.iconFinish,texto:a.textFinish,duracion:a.duracionFinish,estado:"on"},Win.loading(g);d=new XMLHttpRequest;b=
a.url+"?"+b;c=a.method||"POST";d.open(c,b,!0);d.onreadystatechange=function(){var b;if(4===d.readyState)return b=d.responseText,!0!==a.modal&&""!==a.modal||!0!==a.autoClose&&""!==a.autoClose||(g.estado="off",Win.loading(g)),a.success(b,d);!0!==a.modal&&""!==a.modal||!0!==a.autoClose&&""!==a.autoClose||(g.estado="off",Win.loading(g));return a.failure(d)};return d.send(null)}},load:function(a,b){var c,g,d,e,k;d="";if("undefined"!==typeof b.params)for(e in b.params)d+=""===d?e+"="+b.params[e]:"&"+e+
"="+b.params[e];a.innerHTML='<div class="win-content-min-load" ><div class="win-content-min-load-img"><div class="win-min-load-ajax"></div></div><div class="win-content-min-load-label">'+(b.text||"cargando...")+"</div></div>";k=new XMLHttpRequest;k.open(b.method||"POST",b.url+"?"+d,!0);k.onreadystatechange=function(){var b,d;if(4===k.readyState)return d=k.responseText,b=g(d),a.innerHTML=b,c(d)};k.send(null);g=function(a){return a.replace(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:\x3c/script>)","img"),
"")};return c=function(a){var b;a=a.match(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:\x3c/script>)","img"))||[];b="";a.map(function(a){return b+=(a.match(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/im)||["",""])[1]});return eval(b)}}}}();"use strict";
Win=function(){return{Window:function(a){var b,c,g,d,e,k,f,v,x,l,u,q,h,n,m,r;if("undefined"===typeof a)console.warn("Para utiliza la propiedad Window debe enviar el objeto con los parametros\nConsulte la documentacion");else return m=a.width||300,v=a.height||300,l=a.id||"",q=a.title||"",h=a.titleStyle||"",x=a.html||"",f="undefined"!==typeof a.resize?a.resize:!0,d=a.bodyStyle||"",g=document.querySelector("body"),r=document.createElement("div"),e="undefined"!==typeof a.type&&""!==a.type?"alert":"",
b=a.bgBody?"background-color:"+a.bgBody+";":"",c=a.bgTitle?"background-color:"+a.bgTitle+";":"",k=!0===f||""===f?'<div class="win-title-btn" id="btn_close_ventana_'+l+'" onclick="'+l+'.close()"></div>':"",f=!0===f||""===f?'<div class="win-div-resize" id="win_div_resize_'+l+'"></div>':"",r.setAttribute("id","win_modal_"+l),r.setAttribute("class","win-modal"),u=g.offsetWidth<m?0:(g.offsetWidth-m)/2,n=g.offsetHeight<v?0:(g.offsetHeight-v)/2,r.innerHTML='<div style="width:'+m+"; height:"+v+"; top:"+n+
"; left:"+u+"; "+b+" "+d+'" id="'+l+'" class="win-marco">\n\t<div class="win-modal-parent" id="win_modal_window_'+l+'"><div class="win-modal-content"><div class="win-loader-default" id="win_loader_'+l+'"></div><div class="win-modal-label" id="label_cargando_'+l+'"></div></div></div>\n\t<div class="win-title" id="win_title_'+l+'" style="'+c+" "+h+'">\n\t\t<div class="win-title-txt">'+q+"</div>\n\t\t"+k+"\n\t</div>\n\t"+f+'\n\t<div class="win-tbar" id="win_tbar_'+l+'"></div>\n\t<div class="win-window-body '+
e+'" id="win_window_'+l+'">'+x+"</div>\n</div>\n<script onload>alert(1);\x3c/script>",g.appendChild(r),"undefined"!==typeof a.tbar?(a.tbar.id=l,Win.tbar(a.tbar)):document.getElementById("win_tbar_"+l).parentNode.removeChild(document.getElementById("win_tbar_"+l)),"undefined"!==typeof a.autoLoad&&Win.Ajax.load(document.querySelector("#win_window_"+l),a.autoLoad),{close:function(){return document.getElementById(""+l).parentNode.parentNode.removeChild(document.getElementById(""+l).parentNode)}}},tbar:function(a){var b,
c;if("object"===typeof a)return b="",c=document.getElementById("win_tbar_"+a.id),a.forEach(function(a,d,e){if("button"===a.xtype)return Win.button({tbar:c,align:b,json:a});if("buttongroup"===a.xtype)return a.tbar=c,Win.buttongroup(a);if("undefined"!==typeof a.items)return a.items.tbar=c,Win.items(a.items);if("tbtext"===a.xtype)return Win.tbtext({tbar:c,align:b,json:a});if("-"===a)return Win.separator({tbar:c,align:b});if("->"===a)return b="right"})},items:function(a){if("object"===typeof a)return a.forEach(function(b,
c,g){if("panel"===b.xtype)return b.tbar=a.tbar,Win.panel(b)})},buttongroup:function(a){},button:function(a){var b,c,g,d,e;e=a.json.text||"";d=a.json.id||"";c=a.json.cls||"";g="right"===a.align?"widge-right":"";b=document.createElement("div");b.setAttribute("id",d);b.setAttribute("class","win-btn "+g);b.innerHTML='<button class="'+c+'">'+e+"</button>";b.onclick=a.json.handler;return a.tbar.appendChild(b)},panel:function(a){var b,c,g,d,e;g=a.id||"";e=a.width||"auto";c=a.height||"100%";b=a.bodyStyle||
"";d=document.createElement("div");d.setAttribute("id",g);d.setAttribute("class","win-panel ");d.setAttribute("style","width:"+e+";height:"+c+";"+b);a.tbar.appendChild(d);if("undefined"!==typeof a.autoLoad)return Win.Ajax.load(d,a.autoLoad);if("undefined"!==typeof a.html)return d.innerHTML=a.html},tbtext:function(a){var b,c;c=document.createElement("div");b="right"===a.align?"widge-right":"";c.setAttribute("id","win_tbtext_"+a.json.id);c.setAttribute("class","win-tbtext "+b);c.innerHTML="<div>"+a.json.text+
"</div>";return a.tbar.appendChild(c)},separator:function(a){var b;b=document.createElement("div");b.setAttribute("class","win-separator "+("right"===a.align?"widge-right":""));b.innerHTML="<div>|</div>";return a.tbar.appendChild(b)},getButton:function(a){this.hiden=function(a){return document.getElementById("id").style.display="none"};this.show=function(a){return document.getElementById("id").style.display="block"};return a},get:function(a){return{load:function(b){var c;c=document.getElementById(a);
return Win.Ajax.load(c,b)},element:function(){return document.getElementById(a)}}},loading:function(a){var b,c,g,d,e;if("undefined"===typeof a)console.warn("Para hacer uso de la ventana modal debe enviar el objeto con los paramteros Win.loading(obj) \nParametro Obligatorios: id_ventana ,estado");else if("undefined"===typeof a.id_ventana||"undefined"===typeof a.estado)console.warn("Funcion: Loading (Mostrar ventana modal)\nFaltan parametros en el objeto\nParametro Obligatorios: id_ventana ,estado");
else if(document.getElementById("win_window_"+a.id_ventana)){d=document.getElementById("win_modal_window_"+a.id_ventana);c=a.text||"Cargando...";b=a.loader||"default";if("on"===a.estado)return document.getElementById("win_modal_window_"+a.id_ventana).innerHTML='<div class="win-modal-content"><div class="win-loader-default" id="win_loader_'+a.id_ventana+'"></div><div class="win-modal-label" id="label_cargando_'+a.id_ventana+'"></div></div>',d.style.visibility="visible",document.getElementById("win_loader_"+
a.id_ventana).setAttribute("class","win-loader-"+b),document.getElementById("label_cargando_"+a.id_ventana).innerHTML=c;if("off"===a.estado){b={sucess:"",fail:"",warm:""};a?(g=b[a.icono]||b.sucess,c=a.evento_icono||"",e=a.texto||"Informacion Almacenada",b=a.duracion||"2000"):(g=b.sucess,c="",e="Informacion Almacenada",b="2000");if("infinito"===b)return document.getElementById("win_modal_window_"+a.id_ventana).innerHTML="<div class='win-modal-content'><div class='win-modal-img-finish'><img src='"+
g+"' onclick='"+c+"'; ><br><div class='win-modal-label label-finish' >"+e+"</div></div></div>";document.getElementById("win_modal_window_"+a.id_ventana).innerHTML="<div class='win-modal-content'><div class='win-modal-img-finish'><img src='"+g+"' onclick='"+c+"'; ><br><div class='win-modal-label label-finish' >"+e+"</div></div></div>";return setTimeout(function(){return d.style.visibility="hidden"},b)}}else console.warn("Funcion: Loading (Mostrar ventana modal)\nEl id de la ventana es incorrecto no se encuentra la ventana "+
id_ventana)},Alert:function(a){var b;if("undefined"===typeof a)console.warn("Para utiliza la propiedad alert debe enviar el objeto con los parametros\nConsulte la documentacion");else return b=a.title||"Alert",a=a.text||"",new Win.Window({width:250,height:120,id:"Win_ventana_alert",title:b,html:a+'<div class="content-btn"><input type="button" value="Aceptar" onclick="document.getElementById(\'Win_ventana_alert\').parentNode.parentNode.removeChild(document.getElementById(\'Win_ventana_alert\').parentNode)"></div>',
type:"alert",modal:!0,autoScroll:!0,closable:!1,autoDestroy:!0,drag:!1,resize:!1})},Confirm:function(a){var b,c;if("undefined"===typeof a)console.warn("Para utiliza la propiedad alert debe enviar el objeto con los parametros\nConsulte la documentacion");else return c=a.title||"Confirm",b=a.text||"",b+='<div class="content-btn"><input type="button" value="Aceptar" onclick="document.getElementById(\'Win_ventana_confirm\').parentNode.parentNode.removeChild(document.getElementById(\'Win_ventana_confirm\').parentNode);'+
a.functionOK+';"> <input type="button" value="Cancelar" onclick="document.getElementById(\'Win_ventana_confirm\').parentNode.parentNode.removeChild(document.getElementById(\'Win_ventana_confirm\').parentNode);return false;"></div>',new Win.Window({width:250,height:120,id:"Win_ventana_confirm",title:c,html:b,type:"alert",modal:!0,autoScroll:!0,closable:!1,autoDestroy:!0,drag:!1,resize:!1})}}}();
Win.Desktop=function(a){var b,c;c=a.widthIcon||20;b=a.heightIcon||20;this.modulos=function(a){var d;d='<div style="height:100%"> <div class="desk-content-modulos">';a.forEach(function(e,k,f){return d+='<div class="desk-modulo" style="width:'+c+"; height:"+b+';">\n\t<div></div>\n\t<div>'+a.text+"</div>\n</div>"});d+="</div></div>";return document.querySelector("body").innerHTML=d};if("object"===typeof a.modulos)return this.modulos(a.modulos)};
Win.form=function(){({intField:function(a){document.getElementById(a.applyTo).className+=" win-input-number";document.getElementById(a.applyTo).onkeypress=function(a){return Win.form.validateIntField({event:a,eventType:"keypress",input:this})};return document.getElementById(a.applyTo).onchange=function(a){return Win.form.validateIntField({event:a,eventType:"change",input:this})}},doubleField:function(a){document.getElementById(a.applyTo).className+=" win-input-number";document.getElementById(a.applyTo).onkeypress=
function(a){return Win.form.validateDoubleField({event:a,eventType:"keypress",input:this})};return document.getElementById(a.applyTo).onchange=function(a){return Win.form.validateDoubleField({event:a,eventType:"change",input:this})}},textField:function(a){document.getElementById(a.applyTo).onkeyup=function(b){return Win.form.validateTextField({event:b,eventType:"keyup",input:this,type:a.type})};return document.getElementById(a.applyTo).onchange=function(b){return Win.form.validateTextField({event:b,
eventType:"change",input:this,type:a.type})}},emailField:function(a){return document.getElementById(a.applyTo).onchange=function(a){return Win.form.validateEmailField({event:a,input:this})}},globalField:function(a){},validateIntField:function(a){var b;b=document.all?a.event.keyCode:a.event.which;if(8===b||9===b||0===b||13===b)return!0;if("keypress"===a.eventType)return/\d/.test(String.fromCharCode(b));if("change"===a.eventType)return a.input.value=a.input.value.replace(/[^\d.]/g,"")},validateDoubleField:function(a){var b;
b=document.all?a.event.keyCode:a.event.which;if(8===b||9===b||0===b||13===b)return!0;if("keypress"===a.eventType)return/[\d.]/.test(String.fromCharCode(b));if("change"===a.eventType&&(a.input.value=a.input.value.replace(/[^\d.]/g,""),console.log(!!a.input.value.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)),b=!!a.input.value.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/),!b))return b=a.input.value.split("."),a.input.value=b[0]+"."+b[1]},validateTextField:function(a){var b;
b=document.all?a.event.keyCode:a.event.which;if(8===b||9===b||0===b||13===b)return!0;if("keyup"===a.eventType){if("uppercase"===a.type)return a.input.value=a.input.value.toUpperCase();if("lowercase"===a.type)return a.input.value=a.input.value.toLowerCase()}else if("change"===a.eventType)return a.input.value=a.input.value.replace(/[\#\-\"\']/g,"")},validateEmailField:function(a){if(!a.input.value.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i))return a.input.value=
"",a.input.focus()}});return function(a){var b,c,g,d,e,k,f,v,x,l,u,q,h,n,m,r,w;m="-";c=a.applyTo;e=a.format||"Y-m-d";u=a.listeners.select||"";c=document.getElementById(c);b=document.getElementById("calendarDiv");a=[];m=e.replace(/[a-zA-Z\d\s]/g,"")[0];f=e.replace(/[^a-zA-Z\d\s]/g,"");e=c.value.replace(/[^\d]/g,"");""===c.value?(n=(new Date).getFullYear(),h=(new Date).getMonth(),q=(new Date).getDate()):(a[f[0]]=e[0],a[f[1]]=e[1],a[f[2]]=e[2],n=(new Date(a.y)).getFullYear(),h=(new Date(a.m)).getMonth(),
q=(new Date(a.d)).getDate());c.readOnly=!0;c.onfocus=function(){r(this,b);b.style.display="block";g(this);return w(this)};g=function(a){var c,t,d,e,f,p,k,m,q,r;t='<a id="closeCalendar">Close Calendar</a>\n<table cellpadding="0" cellspacing="0" id="linksTable">\n\t<tr>\n\t\t<td><a id="prevMonth"><</a></td>\n\t\t<td><a id="nextMonth">></a></td>\n\t</tr>\n</table>\n<table id="calendar" cellpadding="0" cellspacing="0"`class="win-calendar">\n\t<tr>\n\t\t<th colspan="7" class="calendarHeader">'+l(h)+" "+
n+'</th>\n</tr>\n<tr class="weekDaysTitleRow">';p="DLMMJVS".split("");d=0;for(e=p.length;d<e;d++)c=p[d],t+="<td>"+c+"</td>";c=v(n,h);e=x(n,h);f=0;d=1;7!==e?(f=Math.ceil((e+1+c)/7),p=e+1):p=0;r=(new Date).getDate();m=(new Date).getMonth();q=(new Date).getFullYear();e=0;for(k=f;0<=k?e<k:e>k;0<=k?++e:--e){t+='<tr class="weekDaysRow">';for(f=0;7>f;++f)t=d===r&&n===q&&h===m&&0===p?t+'<td id="today" class="weekDaysCell">':t+'<td class="weekDaysCell">',0===p&&(d<=c&&(t+="<a>"+d+"</a>"),d++),t+="</td>",0<
p&&p--;t+="</tr>"}b.innerHTML=t+"</table>";document.getElementById("closeCalendar").onclick=function(){return b.style.display="none"};document.getElementById("prevMonth").onclick=function(){h--;0>h&&(h=11,n--);g(a);return w(a)};return document.getElementById("nextMonth").onclick=function(){h++;11<h&&(h=0,n++);g(a);return w(a)}};w=function(a){var b,c,d,e,g;g=document.getElementById("calendar").getElementsByTagName("a");e=[];c=0;for(d=g.length;c<d;c++)b=g[c],e.push(b.onclick=function(){document.getElementById("calendarDiv").style.display=
"none";q=this.innerHTML;a.value=k(q,h,n);return u});return e};k=function(a,b,c){var d;b++;10>b&&(b="0"+b);10>a&&(a="0"+a);d=[];d.y=c;d.m=b;d.d=a;return d[f[0]]+m+d[f[1]]+m+d[f[2]]};l=function(a){return"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" ")[a]};v=function(a,b){return 32-(new Date(a,b,32)).getDate()};x=function(a,b){return(new Date(a,b,0)).getDay()};r=function(a,b){var c;c=d(a);b.style.position="absolute";b.style.top=c[1]+18+"px";return b.style.left=
c[0]+"px"};return d=function(a){var b,c;b=c=0;if(a.offsetParent)for(b=a.offsetLeft,c=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop;return[b,c]}}}();
Win.form.Calendar=function(a){var b,c,g,d,e,k,f,v,x,l,u,q,h,n,m,r,w;m="-";c=a.applyTo;e=a.format||"Y-m-d";u=a.listeners.select||"";c=document.getElementById(c);b=document.getElementById("calendarDiv");a=[];m=e.replace(/[a-zA-Z\d\s]/g,"")[0];f=e.replace(/[^a-zA-Z\d\s]/g,"");e=c.value.replace(/[^\d]/g,"");""===c.value?(n=(new Date).getFullYear(),h=(new Date).getMonth(),q=(new Date).getDate()):(a[f[0]]=e[0],a[f[1]]=e[1],a[f[2]]=e[2],n=(new Date(a.y)).getFullYear(),h=(new Date(a.m)).getMonth(),q=(new Date(a.d)).getDate());
c.readOnly=!0;c.onfocus=function(){r(this,b);b.style.display="block";g(this);return w(this)};g=function(a){var c,d,e,f,k,p,m,q,r,u;d='<a id="closeCalendar">Close Calendar</a>\n<table cellpadding="0" cellspacing="0" id="linksTable">\n\t<tr>\n\t\t<td><a id="prevMonth"><</a></td>\n\t\t<td><a id="nextMonth">></a></td>\n\t</tr>\n</table>\n<table id="calendar" cellpadding="0" cellspacing="0"`class="win-calendar">\n\t<tr>\n\t\t<th colspan="7" class="calendarHeader">'+l(h)+" "+n+'</th>\n</tr>\n<tr class="weekDaysTitleRow">';
p="DLMMJVS".split("");e=0;for(f=p.length;e<f;e++)c=p[e],d+="<td>"+c+"</td>";c=v(n,h);f=x(n,h);k=0;e=1;7!==f?(k=Math.ceil((f+1+c)/7),p=f+1):p=0;u=(new Date).getDate();q=(new Date).getMonth();r=(new Date).getFullYear();f=0;for(m=k;0<=m?f<m:f>m;0<=m?++f:--f){d+='<tr class="weekDaysRow">';for(k=0;7>k;++k)d=e===u&&n===r&&h===q&&0===p?d+'<td id="today" class="weekDaysCell">':d+'<td class="weekDaysCell">',0===p&&(e<=c&&(d+="<a>"+e+"</a>"),e++),d+="</td>",0<p&&p--;d+="</tr>"}b.innerHTML=d+"</table>";document.getElementById("closeCalendar").onclick=
function(){return b.style.display="none"};document.getElementById("prevMonth").onclick=function(){h--;0>h&&(h=11,n--);g(a);return w(a)};return document.getElementById("nextMonth").onclick=function(){h++;11<h&&(h=0,n++);g(a);return w(a)}};w=function(a){var b,c,d,e,f;f=document.getElementById("calendar").getElementsByTagName("a");e=[];c=0;for(d=f.length;c<d;c++)b=f[c],e.push(b.onclick=function(){document.getElementById("calendarDiv").style.display="none";q=this.innerHTML;a.value=k(q,h,n);return u});
return e};k=function(a,b,c){var d;b++;10>b&&(b="0"+b);10>a&&(a="0"+a);d=[];d.y=c;d.m=b;d.d=a;return d[f[0]]+m+d[f[1]]+m+d[f[2]]};l=function(a){return"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" ")[a]};v=function(a,b){return 32-(new Date(a,b,32)).getDate()};x=function(a,b){return(new Date(a,b,0)).getDay()};r=function(a,b){var c;c=d(a);b.style.position="absolute";b.style.top=c[1]+18+"px";return b.style.left=c[0]+"px"};return d=function(a){var b,
c;b=c=0;if(a.offsetParent)for(b=a.offsetLeft,c=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop;return[b,c]}};