<html>
	<head>
		<title></title>
		<link rel="stylesheet" href="css/normalize.css" />
		<link rel="stylesheet" href="css/Win.css" />
		<link rel="stylesheet" href="css/Win-loaders.css" />
		<link rel="stylesheet" href="css/icon.css" />

		<!-- STYLE -->
		<!-- <link rel="stylesheet" href="css/Win-theme-dark.css" /> -->
		<link rel="stylesheet" href="css/Win-theme-light.css" />
		<!-- <link rel="stylesheet" href="css/Win-theme-blue.css" /> -->
		<!-- <link rel="stylesheet" href="css/Win-theme-dark-blue.css" /> -->
		<!-- <link rel="stylesheet" href="css/Win-theme-green.css" /> -->
		<!-- <link rel="stylesheet" href="css/Win-theme-red.css" /> -->

		<script src="js/Win.js"></script>
		<script src="js/Win.ajax.js"></script>
		<script src="js/Win.form.js"></script>
	</head>
	<body>
		<script type="text/javascript">

			// var myalto  = Ext.getBody().getHeight();
			// var myancho = Ext.getBody().getWidth();

			// Win_Ventana_ = new Ext.Window({
			//     width       : myancho-100,
			//     height      : myalto-50,
			//     id          : 'Win_Ventana_',
			//     title       : '',
			//     modal       : true,
			//     autoScroll  : false,
			//     closable    : false,
			//     autoDestroy : true,
			//     autoLoad    :
			//     {
			//         url     : '.php',
			//         scripts : true,
			//         nocache : true,
			//         params  :
			//         {
			//             var1 : 'var1',
			//             var2 : 'var2',
			//         }
			//     },
			//     tbar        :
			//     [
			//         {
			//             xtype   : 'buttongroup',
			//             columns : 3,
			//             title   : 'Opciones',
			//             style   : 'border-right:none;',
			//             items   :
			//             [
			//                 {
			//                     xtype       : 'button',
			//                     width       : 60,
			//                     height      : 56,
			//                     text        : 'Regresar',
			//                     scale       : 'large',
			//                     iconCls     : 'regresar',
			//                     iconAlign   : 'top',
			//                     hidden      : false,
			//                     handler     : function(){ BloqBtn(this); Win_Ventana_.close(id) }
			//                 }
			//             ]
			//         }
			//     ]
			// }).show();


			Win_ventana_1 = new Win.Window({
				bodyStyle   : '',
				width       : 800,
				height      : 700,
				id          : 'Win_ventana_1',
				title       : 'VENTANA 1',
				titleStyle  : '',
				modal       : true,
				closable    : true,
				drag        : true,
				resize      : true,
				autoLoad    :
				{
			        url     : 'bd.php',
			        params  :
			        {
			            opc : 'prueba_ajax',
			            var2 : 'var2',
			        }
			    },
				tbar        :
				[
					{
						xtype : 'button',
						id    : 'btn_1',
						cls   : 'user_black_36',
						text  : 'Nuevo Usuario',
						handler : function(){ nueva_ventana(); }
					},'-',
					{
				items	:
				[
					{
						xtype     : 'panel',
						width     : 260,
						height    : 56,
						// bodyStyle : 'background-color:rgb(208, 205, 205)',
						bodyStyle : 'border:1px solid #2a80b9;',
						html      : '<div>contenido por parametro</div>',
						autoLoad  :
						{
							url		: 'bd.php',
							params	:
							{
								opc    : 'prueba_ajax_load',
								prueba : 1

							}
						}
					}
				]

					},
					{
						xtype : 'button',
						id    : 'btn_2',
						handler: function () { ajax_load();	},
						cls   : 'ic_autorenew_black_36dp',
						text  : 'ajax load'
					},
					{
						xtype : 'button',
						id    : 'btn_2',
						handler: function () { ajax_request();	},
						cls   : 'ic_autorenew_black_36dp',
						text  : 'ajax request'
					},'->','-',
					{
						xtype : 'button',
						id    : 'btn_1',
						cls   : 'icon-action-black-ic_perm_identity_black_24dp',
						text  : 'Salir',
						handler : function(){ alert(4); nueva_ventana(); }
					},'-',
					{
						xtype : 'tbtext',
						id    : 'btn_1',
						text  : 'una demostracion de un texto largo<br>con salto de linea',
					}
				]
			});

				function nueva_ventana(){

					Win_ventana_2 = new Win.Window({
						apply       : 'prueba',
						bodyStyle   : '',
						width       : 600,
						height      : 500,
						id          : 'Win_ventana_2',
						title       : 'VENTANA 3',
						modal       : true,
						autoScroll  : true,
						closable    : true,
						autoDestroy : true,
						tabPanel    :
						[
							{
						        xtype     : '',
						        scripts : true,
						        nocache : true,
						        params  :
						        {
						            var1 : 'var1',
						            var2 : 'var2',
						        }
						    },
						],
						tbar        :
						[
							{
								xtype : 'button',
								id    : 'btn_1',
								cls   : 'prueba',
								text  : 'guardar<br>archivo',
								handler : function(){ nueva_ventana2(); }
							},
							{
								xtype : 'button',
								id    : 'btn_2',
								cls   : 'prueba',
								handler: function () { ajax_load_2();	}
								// text  : 'guardar'
							},
						]
					});
				}

				function nueva_ventana2(){
					Win_ventana_3 = new Win.Window({
						apply       : 'prueba',
						bodyStyle   : '',
						width       : 400,
						height      : 300,
						id          : 'Win_ventana_3',
						title       : 'VENTANA 3',
						modal       : true,
						autoScroll  : true,
						closable    : true,
						autoDestroy : true,
						autoLoad    :
						{
					        url     : '.php',
					        params  :
					        {
					            var1 : 'var1',
					            var2 : 'var2',
					        }
					    },
						drag        : true,
						resize      : true,
						tbar        :
						[
							{
								xtype : 'button',
								id    : 'btn_1',
								cls   : 'prueba',
								text  : 'guardar<br>archivo',
								handler : function(){ nueva_ventana2(); }
							},
							{
								xtype : 'button',
								id    : 'btn_2',
								cls   : 'prueba',
								// text  : 'guardar'
							},
						]
					});
				}

				// Win.getButton('btn_1').hiden;
				// prueba = new Win.getButton('btn_1').hiden
				// console.log(prueba)
				// console.log(Win.getButton('btn_1'))


			// array.forEach(function(value,index,element){
			//     console.log(value+'-'+index);
			// });

			// return;
			// AJAX REQUEST
			// Win.Ajax.request({
			// 	url: 'bd.php',
			// 	params: {
			// 		opc: 'prueba_ajax',
			// 		prueba: 1
			// 	},
			// 	success :function (result,xhr){

			//                 if(result == 'true'){ console.log("true"); }
			//                 else{ console.log("false"); }
			//             },
	  //           failure : function(xhr){ console.log("fail"); }
			// })


// text = TEXTO DEL LOADING

// LOADING DISPONIBLES ELEMENTO loader
// default
// loader1
// loader2
// loader3

// duracion : segundos o infinito

	function ajax_load () {
		Win.get('win_window_Win_ventana_1').load({
			url        : 'bd.php',
			text       : 'ajax load text',
			modal      : true,
			params: {
				opc    : 'prueba_ajax_load',
				prueba : 1
			}
		})
	}

	function ajax_request() {
		Win.Ajax.request({
			url            : 'bd.php',
			modal          : true,
			id_ventana     : 'Win_ventana_1',
			text           : 'ajax request text',
			loader         : 'default',
			autoClose      : false,
			textFinish     : 'ajax finalizado',
			iconFinish     : 'warn',
			duracionFinish : 'infinito',
			params: {
				opc    : 'prueba_ajax_request',
				prueba : 1
			},
			success : function (result,xhr){
		                if(result == 'true'){ console.log("true"); }
		                else{ console.log("false"); }
		            },
		    failure : function(xhr){ console.log("fail"); }
		})
	}

	function ajax_load_2 () {
		Win.get('win_window_Win_ventana_1').load({
			url        : 'bd.php',
			id_ventana : 'Win_ventana_2',
			params: {
				opc    : 'prueba_ajax_load',
				prueba : 1
			}
		})
	}

</script>

	</body>
</html>